<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Xtext - Language Development Made Easy!</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description"
		content="The website of Eclipse Xtext, an open-source framework for development of programming langauges and domain-specific languages">
	<meta name="author" content="Sven Efftinge">
	<style>
		#header_wrapper {
			padding-top: 10px;
			/* 60px to make the container go all the way to the bottom of the topbar */
		}
		
		code.prettyprint {
	        padding: 0px;
	        background-color: white;
			border: none;
	    }
	</style>
	<!--  styles -->
	<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
	  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	
	<!-- Le fav and touch icons -->
	
	<link rel="shortcut icon" href="images/favicon.png">
	
	<link href="css/bootstrap.css" rel="stylesheet" type='text/css'>
	<link href="css/bootstrap-responsive.css" rel="stylesheet" type='text/css'>
	<link href="css/style.css" rel="stylesheet" type='text/css'>
	<link href="css/shield-responsive.css" rel="stylesheet" type='text/css'>
	<link href='css/fonts.css' rel='stylesheet' type='text/css'>
	<link href="css/prettyPhoto.css" rel="stylesheet" media="screen" type='text/css'>
	<link href="google-code-prettify/prettify.css" type="text/css" rel="stylesheet"/>
	<script src="js/twitter.js" type="text/javascript"></script>
	<script src="js/jquery-1.7.1.min.js"></script>
	<script src="js/jquery.prettyPhoto.js" type="text/javascript"></script>
		<script type="text/javascript">
	     $(document).ready(function() {
					prettyPrint();
	         
					 $('a[data-rel]').each(function() {
	             $(this).attr('rel', $(this).data('rel'));
	         });
	        
					 $("a[rel^='prettyPhoto']").prettyPhoto({
	             animation_speed: 'fast',
	             slideshow: 5000,
	             autoplay_slideshow: false,
	             opacity: 0.80,
	             show_title: true,
	             theme: 'ligh_square',
	             overlay_gallery: false,
	             social_tools: false
	       
	         });
	         
					$('#nav-outline > li > a').live('click', function() {        
						$(this).parent().find('ul').slideToggle();      
					});
	         
					$('.has-popover').popover();
		 	     
		 	     getTwitters('tweet', { 
			        id: 'xtext', 
			        count: 5,
			        includeRT: true,
			        enableLinks: true, 
			        clearContents: true,
			        template : '"%text%" - %time% by <a href="http://twitter.com/%user_screen_name%/statuses/%id_str%/">@%user_screen_name%</a><br/><br/>'
			     });
	         
	         var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
		 	     po.src = 'https://apis.google.com/js/plusone.js';
		 	     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	     });
		</script>
	<script type="text/javascript">
		var _gaq = _gaq || [];	
	  	_gaq.push([ '_setAccount', 'UA-2429174-4' ]);
		_gaq.push([ '_trackPageview' ]);
		(function() {
			var ga = document.createElement('script');
			ga.type = 'text/javascript';
			ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl'
					: 'http://www')
					+ '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0];
			s.parentNode.insertBefore(ga, s);
		})();
	</script>
</head>
<body>
	<!-- Navbar -->
	<div class="navbar navbar-fixed-top"
		style="border-bottom: 1px solid #000;">
		<div class="navbar-inner">
			<div class="container">
				<a class="btn btn-navbar" data-toggle="collapse"
					data-target=".nav-collapse"> <span class="icon-bar"></span> <span
					class="icon-bar"></span> <span class="icon-bar"></span>
				</a> <a class="brand" href="index.html"></a>
	
	      <div class="btn-group pull-right">
	        <g:plusone href="http://www.xtext.org"></g:plusone>
	      </div>
	
				<div class="nav-collapse collapse" style="height: 0px;">
					<ul class="nav">
						<li ><a href="download.html">Download</a></li>
						<li ><a href="documentation.html">Documentation</a></li>
						<li ><a href="community.html">Community</a></li>
						<li><a href="http://www.eclipse.org">Eclipse.org</a></li>
					</ul>
	
				</div>
				<!--/.nav-collapse -->
	
			</div>
		</div>
	</div>
	<!-- Navbar End -->
<!--Container-->
<div id="header_wrapper" class="container">
	<div class="inner">
		<div class="container">
			<div class="page-heading"><h1>Documentation</h1></div>
		</div> <!-- /.container -->
	</div> <!-- /inner -->
	<ul id="nav-outline">
		<li>&nbsp;</li>
		<li style="color : #333;">Getting Started</li>
		<li><a href="documentation.html#FirstFiveMinutes">5 Minutes Tutorial</a>
	<ul>	<li><a href="documentation.html#NewProject">Creating A New Xtext Project</a></li>
		<li><a href="documentation.html#RunWorkflow">Generating The Language Infrastructure</a></li>
		<li><a href="documentation.html#TestingTheEditor">Try The Editor</a></li>
		<li><a href="documentation.html#Conclusion">Conclusion</a></li>
	</ul>	</li>
		<li><a href="documentation1.html#DomainModelWalkThrough">15 Minutes Tutorial</a>
	<ul>	<li><a href="documentation1.html#_0">Create A New Xtext Project</a></li>
		<li><a href="documentation1.html#_1">Write Your Own Grammar</a></li>
		<li><a href="documentation1.html#_2">Generate Language Artifacts</a></li>
		<li><a href="documentation1.html#_3">Run the Generated IDE Plug-in</a></li>
		<li><a href="documentation1.html#_4">Second Iteration: Adding Packages and Imports</a></li>
	</ul>	</li>
		<li><a href="documentation2.html#DomainmodelNextSteps">15 Minutes Tutorial - Extended</a>
	<ul>	<li><a href="documentation2.html#TutorialCodeGeneration">Writing a Code Generator With Xtend</a></li>
		<li><a href="documentation2.html#TutorialUnitTests">Unit Testing the Language</a></li>
		<li><a href="documentation2.html#TutorialValidation">Creating Custom Validation Rules</a></li>
	</ul>	</li>
		<li><a href="documentation3.html#JvmDomainmodel">Five simple steps to your JVM language</a>
	<ul>	<li><a href="documentation3.html#_5">Step One: Create A New Xtext Project</a></li>
		<li><a href="documentation3.html#_6">Step Two: Write the Grammar</a></li>
		<li><a href="documentation3.html#_7">Step Three: Generate Language Artifacts</a></li>
		<li><a href="documentation3.html#_8">Step Four: Define the Mapping to JVM Concepts</a></li>
		<li><a href="documentation3.html#_9">Step Five : Try the Editor!</a></li>
	</ul>	</li>
		<li>&nbsp;</li>
		<li style="color : #333;">Reference Documentation</li>
		<li><a href="documentation4.html#Overview">Overview</a>
	<ul>	<li><a href="documentation4.html#_10">What is Xtext?</a></li>
		<li><a href="documentation4.html#_11">How Does It Work?</a></li>
		<li><a href="documentation4.html#_12">Xtext is Highly Configurable</a></li>
		<li><a href="documentation4.html#_13">Who Uses Xtext?</a></li>
		<li><a href="documentation4.html#_14">Who is Behind Xtext?</a></li>
		<li><a href="documentation4.html#DSL">What is a Domain-Specific Language</a></li>
	</ul>	</li>
		<li><a href="documentation5.html#grammarLanguage">The Grammar Language</a>
	<ul>	<li><a href="documentation5.html#statemachine">A First Example</a></li>
		<li><a href="documentation5.html#syntax">The Syntax</a></li>
		<li><a href="documentation5.html#metamodelInference">Ecore Model Inference</a></li>
		<li><a href="documentation5.html#grammarMixins">Grammar Mixins</a></li>
		<li><a href="documentation5.html#_15">Common Terminals</a></li>
	</ul>	</li>
		<li><a href="documentation6.html#configuration">Configuration</a>
	<ul>	<li><a href="documentation6.html#generator">The Language Generator</a></li>
		<li><a href="documentation6.html#dependencyInjection">Dependency Injection in Xtext with Google Guice</a></li>
	</ul>	</li>
		<li><a href="documentation7.html#runtime_concepts">Runtime Concepts</a>
	<ul style="display: block;">	<li><a href="documentation7.html#runtimeSetup">Runtime Setup (ISetup)</a></li>
		<li><a href="documentation7.html#equinoxSetup">Setup within Eclipse-Equinox (OSGi)</a></li>
		<li><a href="documentation7.html#_16">Logging</a></li>
		<li><a href="documentation7.html#validation">Validation</a></li>
		<li><a href="documentation7.html#linking">Linking</a></li>
		<li><a href="documentation7.html#scoping">Scoping</a></li>
		<li><a href="documentation7.html#valueconverter">Value Converter</a></li>
		<li><a href="documentation7.html#serialization">Serialization</a></li>
		<li><a href="documentation7.html#formatting">Formatting (Pretty Printing)</a></li>
		<li><a href="documentation7.html#fragmentProvider">Fragment Provider (Referencing Xtext Models From Other EMF Artifacts)</a></li>
		<li><a href="documentation7.html#encoding">Encoding in Xtext</a></li>
	</ul>	</li>
		<li><a href="documentation8.html#ide_concepts">IDE Concepts</a>
	<ul>	<li><a href="documentation8.html#labelProvider">Label Provider</a></li>
		<li><a href="documentation8.html#contentAssist">Content Assist</a></li>
		<li><a href="documentation8.html#quickfixes">Quick Fixes</a></li>
		<li><a href="documentation8.html#templates">Template Proposals</a></li>
		<li><a href="documentation8.html#outline">Outline View</a></li>
		<li><a href="documentation8.html#hyperlinking">Hyperlinking</a></li>
		<li><a href="documentation8.html#highlighting">Syntax Coloring</a></li>
		<li><a href="documentation8.html#refactoring">Rename Refactoring</a></li>
	</ul>	</li>
		<li><a href="documentation9.html#Xbase">Xtext and Java</a>
	<ul>	<li><a href="documentation9.html#_17">Plug-in Setup</a></li>
		<li><a href="documentation9.html#jvmtypes">Referring to Java Elements using JVM Types</a></li>
		<li><a href="documentation9.html#xbaseJavaReferences">Referring to Java Types Using Xbase</a></li>
		<li><a href="documentation9.html#xbaseInferredType">Inferring a JVM Model</a></li>
		<li><a href="documentation9.html#xbaseExpressions">Using Xbase Expressions</a></li>
		<li><a href="documentation9.html#xbaseLanguageRef_Introduction">Xbase Language Reference</a></li>
	</ul>	</li>
		<li><a href="documentation10.html#MWE2">MWE2</a>
	<ul>	<li><a href="documentation10.html#MWE2Exampe">Examples</a></li>
		<li><a href="documentation10.html#MWE2LanguageReference">Language Reference</a></li>
		<li><a href="documentation10.html#MWE2SyntaxReference">Syntax Reference</a></li>
	</ul>	</li>
		<li><a href="documentation11.html#emf_integration">Integration with EMF and Other EMF Editors</a>
	<ul>	<li><a href="documentation11.html#model_metamodel">Model, Ecore Model, and Ecore</a></li>
		<li><a href="documentation11.html#emf_codegen">EMF Code Generation</a></li>
		<li><a href="documentation11.html#xtext_resource">XtextResource Implementation</a></li>
		<li><a href="documentation11.html#gmf_integration">Integration with GMF Editors</a></li>
	</ul>	</li>
		<li>&nbsp;</li>
		<li style="color : #333;">Appendix</li>
		<li><a href="documentation12.html#migrating_from_1_0_x">Migrating from Xtext 1.0.x to 2.0</a>
	<ul>	<li><a href="documentation12.html#_18">Take the Shortcut</a></li>
		<li><a href="documentation12.html#_19">Migrating Step By Step</a></li>
		<li><a href="documentation12.html#_20">Now go for then new features</a></li>
	</ul>	</li>
		<li><a href="documentation13.html#migrating_from_0_7">Migrating from Xtext 0.7.x to 1.0</a>
	<ul>	<li><a href="documentation13.html#_21">Migrating Step By Step</a></li>
	</ul>	</li>
		<li>&nbsp;</li>
		<li style="color : #333;">Additional Resources
		<li><a href="documentation/2.3.0/Documentation.pdf">Documentation <img src="images/pdf_icon.gif"></a>
		<li><a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/">API Documentation (JavaDoc)</a>
	</ul>
</div>
<div id="page">  
	<div class="inner">
		<div id="maincontainer" class="container">
			<!-- chapter -->
			<section id="runtime_concepts" style="padding-top: 68px; margin-top: -68px;">
				<div class="row">
					<div class="span8 offset3">
						<h1 style="padding-top: 30px;">
							Runtime Concepts
						</h1>
						<hr style="margin-top: 5px; margin-bottom: 5px;">
						<p>
							Xtext itself and every language infrastructure developed with Xtext is configured and wired-up using 
							<a href="documentation6.html#dependencyInjection">dependency injection</a>. Xtext may be used in different environments which introduce 
							different constraints. Especially important is the difference between OSGi managed containers and plain 
							vanilla Java programs. To honor these differences Xtext uses the concept of 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/ISetup.html"><abbr title="org.eclipse.xtext.ISetup">ISetup</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/ISetup.java">(src)</a>-implementations in normal mode and uses Eclipse's 
							extension mechanism when it should be configured in an OSGi environment.
						</p>
						<!--  section -->
						<section id="runtimeSetup" style="padding-top: 68px; margin-top: -68px;">
						<h2 style="padding-top: 15px;">Runtime Setup (ISetup)</h2>
						<p>
							For each language there is an implementation of <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/ISetup.html"><abbr title="org.eclipse.xtext.ISetup">ISetup</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/ISetup.java">(src)</a> 
							generated. It implements a method called <code class="prettyprint lang-java">createInjectorAndDoEMFRegistration()</code>, which can be called 
							to do the initialization of the language infrastructure.
						</p>
						<p>
							<strong>Caveat</strong>: The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/ISetup.html"><abbr title="org.eclipse.xtext.ISetup">ISetup</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/ISetup.java">(src)</a> class is intended to be used for runtime and for unit 
							testing, only. if you use it in a Equinox scenario, you will very likely break the running application 
							because entries to the global registries will be overwritten.
						</p>
						<p>
							The setup method returns an <a href="http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/Injector.html"><abbr title="com.google.inject.Injector">Injector</abbr></a>, which can further be used to obtain a 
							parser, etc. It also registers the <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/resource/Resource.Factory.html"><abbr title="org.eclipse.emf.ecore.resource.Resource$Factory">Factory</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/resource/Resource.java">(src)</a> and generated 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html">EPackages</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EPackage.java">(src)</a> to the respective global registries provided 
							by EMF. So basically after having run the setup and you can start using EMF API to load and store models
							of your language.
						</p>
						</section>
						<!--  section -->
						<section id="equinoxSetup" style="padding-top: 68px; margin-top: -68px;">
						<h2 style="padding-top: 15px;">Setup within Eclipse-Equinox (OSGi)</h2>
						<p>
							Within Eclipse we have a generated <strong>Activator</strong>, which creates a Guice <a href="http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/Injector.html"><abbr title="com.google.inject.Injector">Injector</abbr></a>
							using the <a href="documentation6.html#guicemodules">modules</a>. In addition an <a href="http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/IExecutableExtensionFactory.html"><abbr title="org.eclipse.core.runtime.IExecutableExtensionFactory">IExecutableExtensionFactory</abbr></a> 
							is generated for each language, which is used to create <a href="http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/IExecutableExtension.html">IExecutableExtensions</a>.
							This means that everything which is created via extension points is managed by Guice as well, i.e. you can 
							declare dependencies and get them injected upon creation.
						</p>
						<p>
							The only thing you have to do in order to use this factory is to prefix the class with the factory 
							<strong>MyDslExecutableExtensionFactory</strong> name followed by a colon.
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-xml linenums">
&lt;extension point="org.eclipse.ui.editors"&gt;
  &lt;editor
    class="&lt;MyDsl&gt;ExecutableExtensionFactory:
      org.eclipse.xtext.ui.editor.XtextEditor"
    contributorClass=
      "org.eclipse.ui.editors.text.TextEditorActionContributor"
    default="true"
    extensions="mydsl"
    id="org.eclipse.xtext.example.MyDsl"
    name="MyDsl Editor"&gt;
  &lt;/editor&gt;
&lt;/extension&gt;</pre>
							<p>
						</p>
						</section>
						<!--  section -->
						<section id="_16" style="padding-top: 68px; margin-top: -68px;">
						<h2 style="padding-top: 15px;">Logging</h2>
						<p>
							Xtext uses Apache's log4j for logging. It is configured using files named <strong>log4j.properties</strong>, which are looked up 
							in the root of the Java classpath. If you want to change or provide configuration at runtime (i.e. non-OSGi), all 
							you have to do is putting such a <strong>log4j.properties</strong> in place and make sure that it is not overridden by other 
							<strong>log4j.properties</strong> in previous classpath entries.
						</p>
						<p>
							In OSGi you provide configuration by creating a fragment for <strong>org.apache.log4j</strong>. In this case you need to make 
							sure that there is not any second fragment contributing a <strong>log4j.properties</strong> file.
						</p>
						</section>
						<!--  section -->
						<section id="validation" style="padding-top: 68px; margin-top: -68px;">
						<h2 style="padding-top: 15px;">Validation</h2>
						<p>
							Static analysis or validation is one of the most interesting aspects when developing a programming
							language. The users of your languages will be grateful if they get informative feedback as they type. 
							In Xtext there are basically three different kinds of validation.
						</p>
						<!-- subsection -->
						<section id="_49" style="padding-top: 68px; margin-top: -68px;">
						<h3>Automatic Validation</h3>
						<p>
							Some implementation aspects (e.g. the grammar, scoping) of a language have an impact on what is required 
							for a document or semantic model to be valid. Xtext automatically takes care of this.
						</p>
						<!-- subsection -->
						<section id="syntactical_validation" style="padding-top: 68px; margin-top: -68px;">
						<h4>Lexer/Parser: Syntactical Validation</h4>
						<p>
							The syntactical correctness of any textual input is validated automatically by the parser. The error 
							messages are generated by the underlying parser technology. One can use the 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parser/antlr/ISyntaxErrorMessageProvider.html"><abbr title="org.eclipse.xtext.parser.antlr.ISyntaxErrorMessageProvider">ISyntaxErrorMessageProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parser/antlr/ISyntaxErrorMessageProvider.java">(src)</a>-API to customize this messages.
							Any syntax errors can be retrieved from the Resource using the common EMF API:
						</p>
						<p>
							</p>
							<ul>
								<li><a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/resource/Resource.html"><code class="prettyprint lang-xtend">Resource.getErrors()</code></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/resource/Resource.java">(src)</a></li>
								<li><a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/resource/Resource.html"><code class="prettyprint lang-xtend">Resource.getWarnings()</code></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/resource/Resource.java">(src)</a></li>
							</ul>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="linking_validation" style="padding-top: 68px; margin-top: -68px;">
						<h4>Linker: Crosslink Validation</h4>
						<p>
							Any broken crosslinks can be checked generically. As crosslink resolution is done lazily 
							(see <a href="documentation7.html#linking">linking</a>), any broken links are resolved lazily as well. If you want to validate whether 
							all links are valid, you will have to navigate through the model so that all installed EMF proxies 
							get resolved. This is done automatically in the editor.
						</p>
						<p>
							Similar to syntax errors, any unresolvable crosslinks will be reported and can be obtained through:
						</p>
						<p>
							</p>
							<ul>
								<li><a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/resource/Resource.html"><code class="prettyprint lang-xtend">Resource.getErrors()</code></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/resource/Resource.java">(src)</a></li>
								<li><a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/resource/Resource.html"><code class="prettyprint lang-xtend">Resource.getWarnings()</code></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/resource/Resource.java">(src)</a></li>
							</ul>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="concrete_syntax_validation" style="padding-top: 68px; margin-top: -68px;">
						<h4>Serializer: Concrete Syntax Validation</h4>
						<p>
							The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/IConcreteSyntaxValidator.html"><abbr title="org.eclipse.xtext.validation.IConcreteSyntaxValidator">IConcreteSyntaxValidator</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/IConcreteSyntaxValidator.java">(src)</a> validates all constraints that are 
							implied by a grammar. Meeting these constraints for a model is mandatory to be serialized.
						</p>
						<p>
							Example:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-xtext linenums">
MyRule:
  ({MySubRule} "sub")? (strVal+=ID intVal+=INT)*;</pre>
							<p>
						</p>
						<p>
							This implies several constraints:
							</p>
							<ol>
								<li>Types: only instances of <strong>MyRule</strong> and <strong>MySubRule</strong> are allowed for this rule. Subtypes are 
								    prohibited, since the parser never instantiates unknown subtypes.</li>
								<li>Features: In case the <strong>MyRule</strong> and <strong>MySubRule</strong> have <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EStructuralFeature.html">EStructuralFeatures</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EStructuralFeature.java">(src)</a> 
								    besides <strong>strVal</strong> and <strong>intVal</strong>, only <strong>strVal</strong> and <strong>intVal</strong> may have 
								<a href="documentation7.html#transientvalues">non-transient values</a>.</li>
								<li>Quantities: The following condition must be true: <code class="prettyprint lang-java">strVal.size() == intVal.size()</code>.</li>
								<li>Values: It must be possible to <a href="documentation7.html#valueconverter">convert all values</a> to valid tokens for 
								    terminal rule <strong>STRING</strong>.  The same is true for <strong>intVal</strong> and <strong>INT</strong>.</li>
							</ol>
							<p>
						</p>
						<p>
							The typical use case for the concrete syntax validator is validation in non-Xtext-editors that, 
							however, use an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/XtextResource.html"><abbr title="org.eclipse.xtext.resource.XtextResource">XtextResource</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/XtextResource.java">(src)</a>. This is, for example, the case 
							when combining GMF and Xtext. Another use case is when the semantic model is modified "manually" 
							(not by the parser) and then serialized again. Since it is very difficult for the serializer to provide 
							<a href="documentation7.html#parsetreeconstructor">meaningful error messages</a>, the concrete syntax validator is executed by default
							before serialization. A textual Xtext editor itself is <strong>not</strong> a valid use case. Here, the parser ensures 
							that all syntactical constraints are met. Therefore, there is no value in additionally running the 
							concrete syntax validator.
						</p>
						<p>
							There are some limitations to the concrete syntax validator which result from the fact that it treats 
							the grammar as declarative, which is something the parser doesn't always do.
						</p>
						<p>
							</p>
							<ul>
								<li>Grammar rules containing assigned actions (e.g. <code class="prettyprint lang-xtext">{MyType.myFeature=current}</code> are ignored. 
								  Unassigned actions (e.g. <code class="prettyprint lang-xtext">{MyType}</code>), however, are supported.</li>
								<li>Grammar rules that delegate to one or more rules containing assigned actions via unassigned rule 
								  calls are ignored.</li>
								<li>Orders within list-features can not be validated. e.g. <code class="prettyprint lang-xtext">Rule: (foo+=R1 foo+=R2)*</code> implies 
								  that <strong>foo</strong> is expected to contain instances of <strong>R1</strong> and <strong>R2</strong> in an alternating order.</li>
							</ul>
							<p>
						</p>
						<p>
							To use concrete syntax validation you can let Guice inject an instance of 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/IConcreteSyntaxValidator.html"><abbr title="org.eclipse.xtext.validation.IConcreteSyntaxValidator">IConcreteSyntaxValidator</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/IConcreteSyntaxValidator.java">(src)</a> and use it directly. 
							Furthermore, there is an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/impl/ConcreteSyntaxEValidator.html">adapter</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/impl/ConcreteSyntaxEValidator.java">(src)</a> which
							allows to use the concrete syntax validator as an <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EValidator.html"><abbr title="org.eclipse.emf.ecore.EValidator">EValidator</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EValidator.java">(src)</a>. 
							You can, for example, enable it in your runtime module, by adding:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
@SingletonBinding(eager = true)
public Class&lt;? extends ConcreteSyntaxEValidator&gt; 
      bindConcreteSyntaxEValidator() {
  return ConcreteSyntaxEValidator.class;
}</pre>
							<p>
						</p>
						<p>
							To customize error messages please see 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/IConcreteSyntaxDiagnosticProvider.html"><abbr title="org.eclipse.xtext.validation.IConcreteSyntaxDiagnosticProvider">IConcreteSyntaxDiagnosticProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/IConcreteSyntaxDiagnosticProvider.java">(src)</a> and subclass 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/impl/ConcreteSyntaxDiagnosticProvider.html"><abbr title="org.eclipse.xtext.validation.impl.ConcreteSyntaxDiagnosticProvider">ConcreteSyntaxDiagnosticProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/impl/ConcreteSyntaxDiagnosticProvider.java">(src)</a>.
						</p>
						</section>
						</section>
						<!-- subsection -->
						<section id="custom_validation" style="padding-top: 68px; margin-top: -68px;">
						<h3>Custom Validation</h3>
						<p>
							In addition to the afore mentioned kinds of validation, which are more or less done automatically, 
							you can specify additional constraints specific for your Ecore model. We leverage existing 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EValidator.html">EMF API</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EValidator.java">(src)</a> and have put some convenience stuff on top. 
							Basically all you need to do is to make sure that an <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EValidator.html"><abbr title="org.eclipse.emf.ecore.EValidator">EValidator</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EValidator.java">(src)</a> is 
							registered for your <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html"><abbr title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EPackage.java">(src)</a>. The  
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EValidator.Registry.html"><abbr title="org.eclipse.emf.ecore.EValidator$Registry">Registry</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EValidator.java">(src)</a> can only be filled 
							programmatically. That means contrary to the <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.Registry.html"><abbr title="org.eclipse.emf.ecore.EPackage$Registry">Registry</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EPackage.java">(src)</a> and the 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/resource/Resource.Factory.Registry.html"><abbr title="org.eclipse.emf.ecore.resource.Resource$Factory$Registry">Registry</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/resource/Resource.java">(src)</a> there is no Equinox extension 
							point to populate the validator registry.
						</p>
						<p>
							For Xtext we provide a <a href="documentation6.html#generator_fragment">generator fragment</a> for the convenient Java-based 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EValidator.html"><abbr title="org.eclipse.emf.ecore.EValidator">EValidator</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EValidator.java">(src)</a> API. Just add the following fragment to your generator 
							configuration and you are good to go:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-mwe2 linenums">
fragment = 
  org.eclipse.xtext.generator.validation.JavaValidatorFragment {}</pre>
							<p>
						</p>
						<p>
							The generator will provide you with two Java classes. An abstract class generated to <strong>src-gen/</strong> which 
							extends the library class <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/AbstractDeclarativeValidator.html"><abbr title="org.eclipse.xtext.validation.AbstractDeclarativeValidator">AbstractDeclarativeValidator</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/AbstractDeclarativeValidator.java">(src)</a>. This 
							one just registers the <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html">EPackages</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EPackage.java">(src)</a> for which this validator introduces constraints.
							The other class is a subclass of that abstract class and is generated to the <strong>src/</strong> folder in order 
							to be edited by you. That is where you put the constraints in.
						</p>
						<p>
							The purpose of the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/AbstractDeclarativeValidator.html"><abbr title="org.eclipse.xtext.validation.AbstractDeclarativeValidator">AbstractDeclarativeValidator</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/AbstractDeclarativeValidator.java">(src)</a> is to allow you to 
							write constraints in a declarative way - as the class name already suggests. That is instead of writing 
							exhaustive if-else constructs or extending the generated EMF switch you just have to add the 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/Check.html"><abbr title="org.eclipse.xtext.validation.Check">Check</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/Check.java">(src)</a> annotation to any method and it will be invoked automatically
							when validation takes place. Moreover you can state for what type the respective constraint method is, just 
							by declaring a typed parameter. This also lets you avoid any type casts. In addition to the reflective 
							invocation of validation methods the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/AbstractDeclarativeValidator.html"><abbr title="org.eclipse.xtext.validation.AbstractDeclarativeValidator">AbstractDeclarativeValidator</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/AbstractDeclarativeValidator.java">(src)</a> 
							provides a couple of convenient assertions.
						</p>
						<p>
							All in all this is very similar to how JUnit 4 works. Here is an example:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
public class DomainmodelJavaValidator 
  extends AbstractDomainmodelJavaValidator {
    
  @Check
  public void checkTypeNameStartsWithCapital(Type type) {
    if (!Character.isUpperCase(type.getName().charAt(0)))
      warning("Name should start with a capital", 
        DomainmodelPackage.TYPE__NAME);
  }
}</pre>
							<p>
						</p>
						<p>
							You can also implement quick fixes for individual validation errors and warnings. See the 
							<a href="documentation8.html#quickfixes">chapter on quick fixes</a> for details.
						</p>
						</section>
						<!-- subsection -->
						<section id="_50" style="padding-top: 68px; margin-top: -68px;">
						<h3>Validating Manually</h3>
						<p>
							As noted above, Xtext uses EMF's <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EValidator.html"><abbr title="org.eclipse.emf.ecore.EValidator">EValidator</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EValidator.java">(src)</a> API to register validators. 
							You can run the validators on your model programmatically using EMF's 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/util/Diagnostician.html"><abbr title="org.eclipse.emf.ecore.util.Diagnostician">Diagnostician</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/util/Diagnostician.java">(src)</a>, e.g.
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
EObject myModel = myResource.getContents().get(0);
Diagnostic diagnostic = Diagnostician.INSTANCE.validate(myModel);
switch (diagnostic.getSeverity()) {
  case Diagnostic.ERROR:
    System.err.println("Model has errors: ",diagnostic);
    break;
  case Diagnostic.WARNING:
    System.err.println("Model has warnings: ",diagnostic);
}</pre>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="test_validators" style="padding-top: 68px; margin-top: -68px;">
						<h3>Test Validators</h3>
						<p>
							If you have implemented your validators by extending 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/AbstractDeclarativeValidator.html"><abbr title="org.eclipse.xtext.validation.AbstractDeclarativeValidator">AbstractDeclarativeValidator</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/AbstractDeclarativeValidator.java">(src)</a>, there are helper classes which
							assist you when testing your validators.
						</p>
						<p>
							Testing validators typically works as follows: 
							</p>
							<ol>
								<li>The test creates some models which intentionally violate some constraints.</li>
								<li>The test runs some chosen <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/Check.html">@Check-methods</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/Check.java">(src)</a> from the validator.</li>
								<li>The test asserts whether the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/Check.html">@Check-methods</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/Check.java">(src)</a> have raised the expected warnings and errors.</li>
							</ol>
							<p>
						</p>
						<p>
							To create models, you can either use EMF's <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/resource/ResourceSet.html"><abbr title="org.eclipse.emf.ecore.resource.ResourceSet">ResourceSet</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/resource/ResourceSet.java">(src)</a> to 
							load models from your hard disk or you can utilize the <strong>MyDslFactory</strong> that EMF generates 
							for each <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html"><abbr title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EPackage.java">(src)</a>, to construct the tested model elements manually. 
							While the first option has the advantages that you can edit your models in your textual concrete syntax, 
							the second option has the advantage that you can create partial models.
						</p>
						<p>
							To run the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/Check.html">@Check-methods</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/Check.java">(src)</a> and ensure they raise the intended errors and warnings, you can utilize 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/junit4/validation/ValidatorTester.html"><abbr title="org.eclipse.xtext.junit4.validation.ValidatorTester">ValidatorTester</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext.junit4/src/org/eclipse/xtext/junit4/validation/ValidatorTester.java">(src)</a> as shown by the following example:
						</p>
						<p>
							Validator:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
public class MyLanguageValidator extends AbstractDeclarativeValidator {
  @Check
  public void checkFooElement(FooElement element) {
    if(element.getBarAttribute().contains("foo"))
      error("Only Foos allowed", element, 
        MyLanguagePackage.FOO_ELEMENT__BAR_ATTRIBUTE, 101);
  }
}</pre>
							<p>
						</p>
						<p>
							JUnit-Test:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
public class MyLanguageValidatorTest extends AbstractXtextTests {

  private ValidatorTester&lt;MyLanguageValidator&gt; tester;

  @Override
  public void setUp() {
    with(MyLanguageStandaloneSetup.class);
    MyLanguageValidator validator = get(MyLanguageValidator.class);
    tester = new ValidatorTester&lt;TestingValidator&gt;(validator);
  }

  public void testError() {
    FooElement model = MyLanguageFactory.eINSTANCE.createFooElement()
    model.setBarAttribute("barbarbarbarfoo");
    
    tester.validator().checkFooElement(model);
    tester.diagnose().assertError(101);
  }
  
  public void testError2() {
    FooElement model = MyLanguageFactory.eINSTANCE.createFooElement()
    model.setBarAttribute("barbarbarbarfoo");
    
    tester.validate(model).assertError(101);
  }
}</pre>
							<p>
						</p>
						<p>
							This example uses JUnit 3, but since the involved classes from Xtext have no dependency on JUnit 
							whatsoever, JUnit 4 and other testing frameworks will work as well.  JUnit runs the <code class="prettyprint lang-java">setUp()</code>-method 
							before each test case and thereby helps to create some common state. In this example, the validator 
							is instantiated by means of Google Guice. As we inherit from the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/junit4/AbstractXtextTests.html"><abbr title="org.eclipse.xtext.junit4.AbstractXtextTests">AbstractXtextTests</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext.junit4/src/org/eclipse/xtext/junit4/AbstractXtextTests.java">(src)</a>
							there are a plenty of useful methods available and the state of the global EMF singletons will be restored in the
							method <code class="prettyprint lang-java">tearDown()</code>. Afterwards, the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/junit4/validation/ValidatorTester.html"><abbr title="org.eclipse.xtext.junit4.validation.ValidatorTester">ValidatorTester</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext.junit4/src/org/eclipse/xtext/junit4/validation/ValidatorTester.java">(src)</a> 
							is created and parameterized with the actual validator. It acts as a wrapper for the validator, 
							ensures that the validator has a valid state and provides convenient access to the validator itself 
							(<code class="prettyprint lang-java">tester.validator()</code>) as well as to the utility classes which assert diagnostics created by the validator 
							(<code class="prettyprint lang-java">tester.diagnose()</code>). Please be aware that you have to call <code class="prettyprint lang-java">validator()</code> before you can call <code class="prettyprint lang-java">diagnose()</code>. 
							However, you can call <code class="prettyprint lang-java">validator()</code> multiple times in a row.
						</p>
						<p>
							While <code class="prettyprint lang-java">validator()</code> allows to call the validator's <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/Check.html">@Check-methods</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/Check.java">(src)</a> directly, 
							<code class="prettyprint lang-java">validate(model)</code> leaves it to the framework to call the applicable <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/Check.html">@Check-methods</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/Check.java">(src)</a>. However, to avoid 
							side-effects between tests, it is recommended to call the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/Check.html">@Check-methods</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/Check.java">(src)</a> directly.
						</p>
						<p>
							<code class="prettyprint lang-java">diagnose()</code> and <code class="prettyprint lang-java">validate(model)</code> return an object of type 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/junit4/validation/AssertableDiagnostics.html"><abbr title="org.eclipse.xtext.junit4.validation.AssertableDiagnostics">AssertableDiagnostics</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext.junit4/src/org/eclipse/xtext/junit4/validation/AssertableDiagnostics.java">(src)</a> which provides 
							several <strong>assert</strong>-methods to verify whether the expected diagnostics are present:
						</p>
						<p>
							</p>
							<ul>
								<li><code class="prettyprint lang-java">assertError(int code)</code>: There must be one diagnostic with severity ERROR and the supplied error code.</li>
								<li><code class="prettyprint lang-java">assertErrorContains(String messageFragment)</code>: There must be one diagnostic with severity ERROR and 
								    its message must contain <strong>messageFragment</strong>.</li>
								<li><code class="prettyprint lang-java">assertError(int code, String messageFragment)</code>: Verifies severity, error code and messageFragment.</li>
								<li><code class="prettyprint lang-java">assertWarning(...)</code>: This method is available for the same combination of parameters as <code class="prettyprint lang-java">assertError()</code>.</li>
								<li><code class="prettyprint lang-java">assertOK()</code>: Expects that no diagnostics (errors, warnings etc.) have been raised.</li>
								<li><code class="prettyprint lang-java">assertDiagnostics(int severity, int code, String messageFragment)</code>: Verifies severity, 
								    error code and messageFragment.</li>
								<li><code class="prettyprint lang-java">assertAll(DiagnosticPredicate... predicates)</code>: Allows to describe multiple diagnostics at the 
								    same time and verifies that all of them are present. Class 
								<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/junit4/validation/AssertableDiagnostics.html"><abbr title="org.eclipse.xtext.junit4.validation.AssertableDiagnostics">AssertableDiagnostics</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext.junit4/src/org/eclipse/xtext/junit4/validation/AssertableDiagnostics.java">(src)</a> contains static <code class="prettyprint lang-java">error()</code> and 
								<code class="prettyprint lang-java">warning()</code> methods which help to create the needed 
								<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/junit4/validation/AssertableDiagnostics.DiagnosticPredicate.html"><abbr title="org.eclipse.xtext.junit4.validation.AssertableDiagnostics$DiagnosticPredicate">DiagnosticPredicate</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext.junit4/src/org/eclipse/xtext/junit4/validation/AssertableDiagnostics.java">(src)</a>. Example: 
								<code class="prettyprint lang-java">assertAll(error(123), warning("some part of the message"))</code>.</li>
								<li><code class="prettyprint lang-java">assertAny(DiagnosticPredicate predicate)</code>: Asserts that a diagnostic exists which matches the predicate.</li>
							</ul>
							<p>
						</p>
						</section>
						</section>
						<!--  section -->
						<section id="linking" style="padding-top: 68px; margin-top: -68px;">
						<h2 style="padding-top: 15px;">Linking</h2>
						<p>
							The linking feature allows for specification of cross-references within an Xtext grammar.
							The following things are needed for the linking:
						</p>
						<p>
							</p>
							<ol>
								<li>declaration of a crosslink in the grammar (at least in the Ecore model)</li>
								<li>specification of linking semantics (usually provided via the <a href="documentation7.html#scoping">scoping API</a>)</li>
							</ol>
							<p>
						</p>
						<!-- subsection -->
						<section id="_51" style="padding-top: 68px; margin-top: -68px;">
						<h3>Declaration of Crosslinks</h3>
						<p>
							In the grammar a cross-reference is specified using square brackets.
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-xtext linenums">
CrossReference :
  '[' type=ReferencedEClass ('|' terminal=CrossReferenceTerminal)? ']'
;</pre>
							<p>
						</p>
						<p>
							Example:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-xtext linenums">
ReferringType :
  'ref' referencedObject=[Entity|STRING]
;</pre>
							<p>
						</p>
						<p>
							The <a href="documentation5.html#metamodelInference">Ecore model inference</a> would create an <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html"><abbr title="org.eclipse.emf.ecore.EClass">EClass</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EClass.java">(src)</a> 
							<strong>ReferringType</strong> with an <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html"><abbr title="org.eclipse.emf.ecore.EReference">EReference</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EReference.java">(src)</a> <strong>referencedObject</strong> of type <strong>Entity</strong>
							with its containment property set to <code class="prettyprint lang-java">false</code>. The referenced object would be identified 
							either by a <strong>STRING</strong> and the surrounding
							information in the current context (see <a href="documentation7.html#scoping">scoping</a>). If you do not use <code class="prettyprint lang-xtext">generate</code> but <code class="prettyprint lang-xtext">import</code> 
							an existing Ecore model, the class <strong>ReferringType</strong> (or one of its super types) would need to have an 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html"><abbr title="org.eclipse.emf.ecore.EReference">EReference</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EReference.java">(src)</a> of type <strong>Entity</strong> (or one of its super types) declared. Also the 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html">EReference's</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EReference.java">(src)</a> containment and container properties needs to be set to <code class="prettyprint lang-java">false</code>.
						</p>
						</section>
						<!-- subsection -->
						<section id="_52" style="padding-top: 68px; margin-top: -68px;">
						<h3>Default Runtime Behavior (Lazy Linking)</h3>
						<p>
							Xtext uses lazy linking by default and we encourage users to stick to this because it provides  
							many advantages. One of which is improved performance in all scenarios where you don't have to load 
							the whole closure of all transitively referenced resources. Furthermore it automatically solves 
							situations where one link relies on other links. Though cyclic linking dependencies are not 
							supported by Xtext at all.
						</p>
						<p>
							When parsing a given input string, say
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-linkingexample linenums">
ref Entity01</pre>
							<p>
						</p>
						<p>
							the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/linking/lazy/LazyLinker.html"><abbr title="org.eclipse.xtext.linking.lazy.LazyLinker">LazyLinker</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/linking/lazy/LazyLinker.java">(src)</a> first creates an EMF proxy and 
							assigns it to the corresponding <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html"><abbr title="org.eclipse.emf.ecore.EReference">EReference</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EReference.java">(src)</a>. In EMF a proxy is described by a 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/common/util/URI.html"><abbr title="org.eclipse.emf.common.util.URI">URI</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.common/src/org/eclipse/emf/common/util/URI.java">(src)</a>, which points to the real <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a>. 
							In the case of lazy linking the stored <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/common/util/URI.html"><abbr title="org.eclipse.emf.common.util.URI">URI</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.common/src/org/eclipse/emf/common/util/URI.java">(src)</a> comprises of the context 
							information given at parse time, which is the <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a> containing the cross-reference, 
							the actual <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html"><abbr title="org.eclipse.emf.ecore.EReference">EReference</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EReference.java">(src)</a>, the index (in case it's a multi-valued cross-reference) 
							and the string which represented the crosslink in the concrete syntax. The latter usually corresponds to 
							the name of the referenced <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a>. In EMF a <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/common/util/URI.html"><abbr title="org.eclipse.emf.common.util.URI">URI</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.common/src/org/eclipse/emf/common/util/URI.java">(src)</a>
							consists of information about the resource the <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a> is contained in as well as a so 
							called fragment part, which is used to find the <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a> within that resource. When an  
							EMF proxy is resolved, the current <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/resource/ResourceSet.html"><abbr title="org.eclipse.emf.ecore.resource.ResourceSet">ResourceSet</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/resource/ResourceSet.java">(src)</a> is asked. The resource set 
							uses the first part to obtain (i.e. load if it is not already loaded) the resource. Then the resource is asked to 
							return the <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a> based on the fragment in the URI. The actual cross-reference resolution 
							is done by <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/linking/lazy/LazyLinkingResource.html">LazyLinkingResource.getEObject(String)</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/linking/lazy/LazyLinkingResource.java">(src)</a> which receives the 
							fragment and delegates to the implementation of the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/linking/ILinkingService.html"><abbr title="org.eclipse.xtext.linking.ILinkingService">ILinkingService</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/linking/ILinkingService.java">(src)</a>. The default 
							implementation in turn delegates to the <a href="documentation7.html#scoping">scoping API</a>.
						</p>
						<p>
							A <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/linking/impl/DefaultLinkingService.html">simple implementation</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/linking/impl/DefaultLinkingService.java">(src)</a> of the linking service is shipped with Xtext 
							and used for any grammar per default. Usually any necessary customization of the linking behavior 
							can best be described using the <a href="documentation7.html#scoping">scoping API</a>.
						</p>
						</section>
						</section>
						<!--  section -->
						<section id="scoping" style="padding-top: 68px; margin-top: -68px;">
						<h2 style="padding-top: 15px;">Scoping</h2>
						<p>
							Using the scoping API one defines which elements are referable by a certain reference. For instance, 
							using the introductory example (Fowler's state machine language)
							a transition contains two cross-references: One to a declared event and one to a declared state.
						</p>
						<p>
							Example:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-fowlerexample linenums">
events
  nothingImportant  MYEV
end
 
state idle
  nothingImportant =&gt; idle
end</pre>
							<p>
						</p>
						<p>
							The grammar rule for transitions looks like this:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-xtext linenums">
Transition :
  event=[Event] '=&gt;' state=[State];</pre>
							<p>
						</p>
						<p>
							The grammar states that for the reference <strong>event</strong> only instances of the type <strong>Event</strong> are allowed and 
							that for the EReference <strong>state</strong> only instances of type <strong>State</strong> can be referenced. However, this simple 
							declaration doesn't say anything about where to find the states or events. That is the duty of scopes.
						</p>
						<p>
							An <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/IScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.IScopeProvider">IScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/IScopeProvider.java">(src)</a> is responsible for providing 
							an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/IScope.html"><abbr title="org.eclipse.xtext.scoping.IScope">IScope</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/IScope.java">(src)</a> for a given context <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a> and 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html"><abbr title="org.eclipse.emf.ecore.EReference">EReference</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EReference.java">(src)</a>. The returned <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/IScope.html"><abbr title="org.eclipse.xtext.scoping.IScope">IScope</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/IScope.java">(src)</a> should 
							contain all target candidates for the given object and cross-reference.
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
public interface IScopeProvider {

  /**
   * Returns a scope for the given context. The scope 
   * provides access to the compatible visible EObjects 
   * for a given reference.
   *
   * @param context the element from which an element shall be 
   *        referenced
   * @param reference the reference to be used to filter the 
   *        elements.
   * @return {@link IScope} representing the inner most 
   *         {@link IScope} for the passed context and reference. 
   *         Note for implementors: The result may not be 
   *         &lt;code&gt;null&lt;/code&gt;. Return 
   *         &lt;code&gt;IScope.NULLSCOPE&lt;/code&gt; instead.
   */
  IScope getScope(EObject context, EReference reference);

}</pre>
							<p>
						</p>
						<p>
							A single <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/IScope.html"><abbr title="org.eclipse.xtext.scoping.IScope">IScope</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/IScope.java">(src)</a> represents an element of a linked list of scopes. 
							That means that a scope can be nested within an outer scope. Each scope works like a symbol table or a 
							map where the keys are strings and the values are so called <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IEObjectDescription.html"><abbr title="org.eclipse.xtext.resource.IEObjectDescription">IEObjectDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IEObjectDescription.java">(src)</a>, 
							which is effectively an abstract description of a real <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a>.
						</p>
						<!-- subsection -->
						<section id="global_scopes" style="padding-top: 68px; margin-top: -68px;">
						<h3>Global Scopes and Resource Descriptions</h3>
						<p>
							In the state machine example we don't have references across model files. Neither is there a concept like 
							a namespace which would make scoping a bit more complicated. Basically, every <strong>State</strong> and every <strong>Event</strong> 
							declared in the same resource is visible by their name. However, in the real world things are most likely 
							not that simple: What if you want to reuse certain declared states and events across different 
							state machines and you want to share those as library between different users? You would want to introduce 
							some kind of cross resource reference.
						</p>
						<p>
							Defining what is visible from outside the current resource is the responsibility of global scopes. 
							As the name suggests, global scopes are provided by instances of the 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/IGlobalScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.IGlobalScopeProvider">IGlobalScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/IGlobalScopeProvider.java">(src)</a>. The data structures used to 
							store its elements are described in the next section.
						</p>
						<!-- subsection -->
						<section id="resourcedescriptions" style="padding-top: 68px; margin-top: -68px;">
						<h4>Resource and EObject Descriptions</h4>
						<p>
							In order to make states and events of one file referable from another file you need to export them as 
							part of a so called <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription">IResourceDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a>.
						</p>
						<p>
							A <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription">IResourceDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a> contains information about the resource itself 
							which primarily its <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/common/util/URI.html"><abbr title="org.eclipse.emf.common.util.URI">URI</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.common/src/org/eclipse/emf/common/util/URI.java">(src)</a>, a list 
							of exported <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html">EObjects</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a> in the form of 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IEObjectDescription.html">IEObjectDescriptions</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IEObjectDescription.java">(src)</a>
							as well as information about outgoing cross-references and qualified names it references. The cross 
							references contain only resolved references, while the list of imported qualified names also contain 
							those names, which couldn't be resolved. This information is leveraged by Xtext's indexing infrastructure
							in order to compute the transitive hull of dependent resources.
						</p>
						<p>
							For users and especially in the context of scoping the most important information is the list of 
							exported <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html">EObjects</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a>. An <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IEObjectDescription.html"><abbr title="org.eclipse.xtext.resource.IEObjectDescription">IEObjectDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IEObjectDescription.java">(src)</a> 
							stores the <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/common/util/URI.html"><abbr title="org.eclipse.emf.common.util.URI">URI</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.common/src/org/eclipse/emf/common/util/URI.java">(src)</a> of the actual <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a>,
							its <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/QualifiedName.html"><abbr title="org.eclipse.xtext.naming.QualifiedName">QualifiedName</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/QualifiedName.java">(src)</a>, as well as its <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html"><abbr title="org.eclipse.emf.ecore.EClass">EClass</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EClass.java">(src)</a>. 
							In addition one can export arbitrary information using the <strong>user data</strong> map. The following diagram gives 
							an overview on the description classes and their relationships.
						</p>
						<p>
							</p>
							<div class="thumbnail">
								<img src="images/index_datamodel.png" alt="The data model of Xtext's index" width="456" height="457">
							</div>
							<p>
						</p>
						<p>
							A language is configured with a default implementation of <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.Manager.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a> 
							which computes the list of exported <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IEObjectDescription.html">IEObjectDescriptions</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IEObjectDescription.java">(src)</a> by iterating 
							the whole EMF model and applying the <code class="prettyprint lang-java">getQualifiedName(EObject obj)</code> from 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/IQualifiedNameProvider.html"><abbr title="org.eclipse.xtext.naming.IQualifiedNameProvider">IQualifiedNameProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/IQualifiedNameProvider.java">(src)</a> 
							on each <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a>. If the object has a qualified name an 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IEObjectDescription.html"><abbr title="org.eclipse.xtext.resource.IEObjectDescription">IEObjectDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IEObjectDescription.java">(src)</a> is created and exported 
							(i.e. added to the list). If an <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a> doesn't have a qualified name, the 
							element is considered to be not referable from outside the resource and consequently not indexed. If you 
							don't like this behavior, you can implement and bind your own implementation of 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.Manager.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a>.
						</p>
						<p>
							There are also two different default implementations of <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/IQualifiedNameProvider.html"><abbr title="org.eclipse.xtext.naming.IQualifiedNameProvider">IQualifiedNameProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/IQualifiedNameProvider.java">(src)</a>. 
							Both work by looking up an <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EAttribute.html"><abbr title="org.eclipse.emf.ecore.EAttribute">EAttribute</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EAttribute.java">(src)</a> 'name'. The
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/SimpleNameProvider.html"><abbr title="org.eclipse.xtext.naming.SimpleNameProvider">SimpleNameProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/SimpleNameProvider.java">(src)</a> simply returns the plain value, while the 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/DefaultDeclarativeQualifiedNameProvider.html"><abbr title="org.eclipse.xtext.naming.DefaultDeclarativeQualifiedNameProvider">DefaultDeclarativeQualifiedNameProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/DefaultDeclarativeQualifiedNameProvider.java">(src)</a> concatenates 
							the simple name with the qualified name of its parent exported <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a>. This
							effectively simulates the qualified name computation of most namespace-based languages (like e.g. Java).
						</p>
						<p>
							As mentioned above, in order to calculate an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription">IResourceDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a> for a 
							resource the framework asks the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.Manager.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a>. To convert 
							between a <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/QualifiedName.html"><abbr title="org.eclipse.xtext.naming.QualifiedName">QualifiedName</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/QualifiedName.java">(src)</a> and its <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html"><abbr title="java.lang.String">String</abbr></a> representation you 
							can use the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/IQualifiedNameConverter.html"><abbr title="org.eclipse.xtext.naming.IQualifiedNameConverter">IQualifiedNameConverter</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/IQualifiedNameConverter.java">(src)</a>. Here is some Java code showing how to do 
							that:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
@Inject IQualifiedNameConverter converter;

Manager manager = // obtain an instance of IResourceDescription.Manager
IResourceDescription description =
  manager.getResourceDescription(resource);
for (IEObjectDescription eod : description.getExportedObjects()) {
  System.out.println(converter.toString(eod.getQualifiedName()));
}</pre>
							<p>
						</p>
						<p>
							In order to obtain an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.Manager.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a> it is best to ask the 
							corresponding <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceServiceProvider.html"><abbr title="org.eclipse.xtext.resource.IResourceServiceProvider">IResourceServiceProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceServiceProvider.java">(src)</a>. That is because each 
							language might have a totally different implementation and as you might refer from your language to a 
							different language you cannot reuse your language's <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.Manager.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a>. 
							One basically asks the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceServiceProvider.Registry.html"><abbr title="org.eclipse.xtext.resource.IResourceServiceProvider$Registry">Registry</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceServiceProvider.java">(src)</a> (there is usually 
							one global instance) for an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceServiceProvider.html"><abbr title="org.eclipse.xtext.resource.IResourceServiceProvider">IResourceServiceProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceServiceProvider.java">(src)</a>, which in turn provides 
							an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.Manager.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a> along other useful services.
						</p>
						<p>
							If you are running in a Guice enabled scenario, the code looks like this:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
@Inject 
private IResourceServiceProvider.Registry rspr;
  
private IResourceDescription.Manager getManager(Resource res) {
  IResourceServiceProvider resourceServiceProvider = 
    rspr.getResourceServiceProvider(res.getURI());
  return resourceServiceProvider.getResourceDescriptionManager();
}</pre>
							<p>
						</p>
						<p>
							If you don't run in a Guice enabled context you will likely have to directly access the singleton:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
private IResourceServiceProvider.Registry rspr = 
  IResourceServiceProvider.Registry.INSTANCE;</pre>
							<p>
						</p>
						<p>
							However, we strongly encourage you to use dependency injection. Now, that we know how to export elements to be 
							referable from other resources, we need to learn how those exported 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IEObjectDescription.html">IEObjectDescriptions</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IEObjectDescription.java">(src)</a> can be made available to the referencing resources. That is 
							the responsibility of <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/IGlobalScopeProvider.html">global scoping</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/IGlobalScopeProvider.java">(src)</a> which is 
							described in the following chapter.
						</p>
						</section>
						<!-- subsection -->
						<section id="import_uri" style="padding-top: 68px; margin-top: -68px;">
						<h4>Global Scopes Based On Explicit Imports (ImportURI Mechanism)</h4>
						<p>
							A simple and straight forward solution is to have explicit references to other resources in your 
							file by explicitly listing pathes or <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/common/util/URI.html">URIs</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.common/src/org/eclipse/emf/common/util/URI.java">(src)</a> to all referenced resources 
							in your model file. That is for instance what most include mechanisms use. In Xtext we provide a handy 
							implementation of an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/IGlobalScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.IGlobalScopeProvider">IGlobalScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/IGlobalScopeProvider.java">(src)</a> which is based on a naming convention 
							and makes this semantics very easy to use. Talking of the introductory example and given you would want to add 
							support for referencing external <strong>States</strong> and <strong>Events</strong> from within your state machine, all you had to do is 
							add something like the following to the grammar definition:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-xtext linenums">
Statemachine :
  (imports+=Import)* // allow imports
  'events'
     (events+=Event)+
  'end'
  ('resetEvents'
     (resetEvents+=[Event])+
  'end')?
  'commands'
     (commands+=Command)+
  'end'
  (states+=State)+;

Import : 
  'import' importURI=STRING; // feature must be named importURI</pre>
							<p>
						</p>
						<p>
							This effectively allows import statements to be declared before the events section. In addition 
							you will have to make sure that you have bound the 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/impl/ImportUriGlobalScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.impl.ImportUriGlobalScopeProvider">ImportUriGlobalScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/impl/ImportUriGlobalScopeProvider.java">(src)</a> for the type 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/IGlobalScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.IGlobalScopeProvider">IGlobalScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/IGlobalScopeProvider.java">(src)</a> by the means of <a href="documentation6.html#dependencyInjection">Guice</a>. 
							That implementation looks up any <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EAttribute.html">EAttributes</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EAttribute.java">(src)</a> named 'importURI' in your
							model and interprets their values as URIs that point to imported resources. That is it adds the corresponding 
							resources to the current resource's resource set. In addition the scope provider uses the 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.Manager.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a> of that 
							imported resource to compute all the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IEObjectDescription.html">IEObjectDescriptions</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IEObjectDescription.java">(src)</a> returned 
							by the <a href="http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/preferences/IScope.html"><abbr title="org.eclipse.core.runtime.preferences.IScope">IScope</abbr></a>.
						</p>
						<p>
							Global scopes based on import URIs are available if you use the 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/generator/scoping/ImportURIScopingFragment.html"><abbr title="org.eclipse.xtext.generator.scoping.ImportURIScopingFragment">ImportURIScopingFragment</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext.generator/src/org/eclipse/xtext/generator/scoping/ImportURIScopingFragment.java">(src)</a> in the workflow of your language.
							It will bind an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/impl/ImportUriGlobalScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.impl.ImportUriGlobalScopeProvider">ImportUriGlobalScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/impl/ImportUriGlobalScopeProvider.java">(src)</a> that handles 
							<strong>importURI</strong> features.
						</p>
						</section>
						<!-- subsection -->
						<section id="index_based" style="padding-top: 68px; margin-top: -68px;">
						<h4>Global Scopes Based On External Configuration (e.g. Classpath-Based)</h4>
						<p>
							Instead of explicitly referring to imported resources, the other possibility is to have some kind of 
							external configuration in order to define what is visible from outside a resource. Java for instances 
							uses the notion of the classpath to define containers (jars and class folders) which contain any 
							referenceable elements. In the case of Java also the order of such entries is important.
						</p>
						<p>
							Since version 1.0.0 Xtext provides support for this kind of global scoping. To enable it, a 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/impl/DefaultGlobalScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.impl.DefaultGlobalScopeProvider">DefaultGlobalScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/impl/DefaultGlobalScopeProvider.java">(src)</a> has to be bound to 
							the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/IGlobalScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.IGlobalScopeProvider">IGlobalScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/IGlobalScopeProvider.java">(src)</a> interface.
						</p>
						<p>
							By default Xtext leverages the classpath mechanism since it is well designed and already understood 
							by most of our users. The available tooling provided by JDT and PDE to configure the classpath adds 
							even more value. However, it is just a default: You can reuse the infrastructure without using Java 
							and independent from the JDT.
						</p>
						<p>
							In order to know what is available in the "world" a global scope provider which relies on external 
							configuration needs to read that configuration in and be able to find all candidates for a certain 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EReference.html"><abbr title="org.eclipse.emf.ecore.EReference">EReference</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EReference.java">(src)</a>. If you don't want to force users to have a folder and file name 
							structure reflecting the actual qualified names of the referenceable <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html">EObjects</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a>, 
							you'll have to load all resources up front and either keep holding them in memory or remembering all information 
							which is needed for the resolution of cross-references. In Xtext that information is provided by a so called 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IEObjectDescription.html"><abbr title="org.eclipse.xtext.resource.IEObjectDescription">IEObjectDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IEObjectDescription.java">(src)</a>.
						</p>
						<!-- subsection -->
						<section id="containers" style="padding-top: 68px; margin-top: -68px;">
						<h5>About the Index, Containers and Their Manager</h5>
						<p>
							Xtext ships with an index which remembers all <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription">IResourceDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a> and 
							their <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IEObjectDescription.html"><abbr title="org.eclipse.xtext.resource.IEObjectDescription">IEObjectDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IEObjectDescription.java">(src)</a> objects. In the IDE-context (i.e. when running 
							the editor, etc.) the index is updated by an incremental project builder. As opposed to that, in a non-UI 
							context you typically do not have to deal with changes such that the infrastructure can be much simpler. In 
							both situations the global index state is held by an implementation of <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescriptions.html"><abbr title="org.eclipse.xtext.resource.IResourceDescriptions">IResourceDescriptions</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescriptions.java">(src)</a> 
							(Note the plural form!). The bound singleton in the UI scenario is even aware of unsaved editor changes, 
							such that all linking happens to the latest maybe unsaved version of the resources. You will find the 
							Guice configuration of the global index in the UI scenario in 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/ui/shared/internal/SharedModule.html"><abbr title="org.eclipse.xtext.ui.shared.internal.SharedModule">SharedModule</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext.ui.shared/src/org/eclipse/xtext/ui/shared/internal/SharedModule.java">(src)</a>.
						</p>
						<p>
							The index is basically a flat list of instances of <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription">IResourceDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a>. 
							The index itself doesn't know about visibility constraints due to classpath restriction. Rather than that, 
							they are defined by the referencing language by means of so called <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IContainer.html">IContainers</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IContainer.java">(src)</a>: 
							While Java might load a resource via <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/ClassLoader.html">ClassLoader.loadResource()</a> (i.e. using the classpath mechanism), another 
							language could load the same resource using the file system paths.
						</p>
						<p>
							Consequently, the information which container a resource belongs to depends on the referencing 
							context. Therefore an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceServiceProvider.html"><abbr title="org.eclipse.xtext.resource.IResourceServiceProvider">IResourceServiceProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceServiceProvider.java">(src)</a> provides another interesting 
							service, which is called <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IContainer.Manager.html"><abbr title="org.eclipse.xtext.resource.IContainer$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IContainer.java">(src)</a>. For a given 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription">IResourceDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a>, the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IContainer.Manager.html"><abbr title="org.eclipse.xtext.resource.IContainer$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IContainer.java">(src)</a> 
							provides you with the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IContainer.html"><abbr title="org.eclipse.xtext.resource.IContainer">IContainer</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IContainer.java">(src)</a> as well as with a list of all 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IContainer.html">IContainers</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IContainer.java">(src)</a> which are visible from there. Note that the  
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescriptions.html">index</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescriptions.java">(src)</a> is globally 
							shared between all languages while the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IContainer.Manager.html"><abbr title="org.eclipse.xtext.resource.IContainer$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IContainer.java">(src)</a> which adds the semantics of containers, can 
							be very different depending on the language. The following method lists all resources visible from a 
							given <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/resource/Resource.html"><abbr title="org.eclipse.emf.ecore.resource.Resource">Resource</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/resource/Resource.java">(src)</a>:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
@Inject
IContainer.Manager manager;

public void listVisibleResources(
        Resource myResource, IResourceDescriptions index) {
  IResourceDescription descr = 
        index.getResourceDescription(myResource.getURI());
  for(IContainer visibleContainer: 
        manager.getVisibleContainers(descr, index)) { 
    for(IResourceDescription visibleResourceDesc:
            visibleContainer.getResourceDescriptions()) { 
      System.out.println(visibleResourceDesc.getURI());
    }
  }
}</pre>
							<p>
						</p>
						<p>
							Xtext ships two implementations of <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IContainer.Manager.html"><abbr title="org.eclipse.xtext.resource.IContainer$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IContainer.java">(src)</a> which are 
							as usual bound with Guice: The default binding is to 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/impl/SimpleResourceDescriptionsBasedContainerManager.html"><abbr title="org.eclipse.xtext.resource.impl.SimpleResourceDescriptionsBasedContainerManager">SimpleResourceDescriptionsBasedContainerManager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/impl/SimpleResourceDescriptionsBasedContainerManager.java">(src)</a>, 
							which assumes all <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IResourceDescription.html"><abbr title="org.eclipse.xtext.resource.IResourceDescription">IResourceDescription</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IResourceDescription.java">(src)</a> to be in a single common
							container. If you don't care about container support, you'll be fine with this one. Alternatively, 
							you can bind <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/containers/StateBasedContainerManager.html"><abbr title="org.eclipse.xtext.resource.containers.StateBasedContainerManager">StateBasedContainerManager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/containers/StateBasedContainerManager.java">(src)</a> and an 
							additional <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/containers/IAllContainersState.html"><abbr title="org.eclipse.xtext.resource.containers.IAllContainersState">IAllContainersState</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/containers/IAllContainersState.java">(src)</a> which 
							keeps track of the set of available containers and their visibility relationships.
						</p>
						<p>
							Xtext offers a couple of strategies for managing containers: If you're running an Eclipse workbench, 
							you can define containers based on Java projects and their classpaths or based on plain Eclipse projects. 
							Outside Eclipse, you can provide a set of file system paths to be scanned for models. All of these only 
							differ in the bound instance of <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/containers/IAllContainersState.html"><abbr title="org.eclipse.xtext.resource.containers.IAllContainersState">IAllContainersState</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/containers/IAllContainersState.java">(src)</a> 
							of the referring language. These will be described in detail in the following sections.
						</p>
						<p>
							</p>
							<div class="thumbnail">
								<img src="images/index_container.png" alt="IContainer Management" width="691" height="640">
							</div>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="jdt_based_containers" style="padding-top: 68px; margin-top: -68px;">
						<h5>JDT-Based Container Manager</h5>
						<p>
							As JDT is an Eclipse feature, this JDT-based container management is only available in the UI scenario. 
							It assumes so called <a href="http://help.eclipse.org/helios/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IPackageFragmentRoot.html">IPackageFragmentRoots</a> as containers. An 
							<a href="http://help.eclipse.org/helios/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IPackageFragmentRoot.html"><abbr title="org.eclipse.jdt.core.IPackageFragmentRoot">IPackageFragmentRoot</abbr></a> in JDT is the root of a tree of Java model elements. 
							It usually refers to 
							</p>
							<ul>
								<li>a source folder of a Java project,</li>
								<li>a referenced jar,</li>
								<li>a classpath entry of a referenced Java project, or</li>
								<li>the exported packages of a required PDE plug-in.</li>
							</ul>
							<p>
						</p>
						<p>
							So for an element to be referable, its resource must be on the classpath of the caller's Java project 
							and it must be exported (as described above).
						</p>
						<p>
							As this strategy allows to reuse a lot of nice Java things like jars, OSGi, maven, etc. it is part of 
							the default: You should not have to reconfigure anything to make it work. Nevertheless, if you messed 
							something up, make sure you bind
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
public Class&lt;? extends IContainer.Manager&gt; bindIContainer$Manager() {
  return StateBasedContainerManager.class;
}</pre>
							<p>
						</p>
						<p>
							in the runtime module and
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
public Provider&lt;IAllContainersState&gt; provideIAllContainersState() {
  return org.eclipse.xtext.ui.shared.Access.getJavaProjectsState();
}</pre>
							<p>
						</p>
						<p>
							in the UI module of the referencing language. The latter looks a bit more difficult than a common 
							binding, as we have to bind a global singleton to a Guice provider. A 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/ui/containers/StrictJavaProjectsState.html"><abbr title="org.eclipse.xtext.ui.containers.StrictJavaProjectsState">StrictJavaProjectsState</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/containers/StrictJavaProjectsState.java">(src)</a> requires all elements to be on the 
							classpath, while the default <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/ui/containers/JavaProjectsState.html"><abbr title="org.eclipse.xtext.ui.containers.JavaProjectsState">JavaProjectsState</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/containers/JavaProjectsState.java">(src)</a> also allows 
							models in non-source folders.
						</p>
						</section>
						<!-- subsection -->
						<section id="project_based_containers" style="padding-top: 68px; margin-top: -68px;">
						<h5>Eclipse Project-Based Containers</h5>
						<p>
							If the classpath-based mechanism doesn't work for your case, Xtext offers an alternative container 
							manager based on plain Eclipse projects: Each project acts as a container and the project references 
							<strong>Properties-&gt;Project References</strong> are the visible containers.
						</p>
						<p>
							In this case, your runtime module should define
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-xtend linenums">
public Class&lt;? extends IContainer.Manager&gt; bindIContainer$Manager() {
  return StateBasedContainerManager.class;
}</pre>
							<p>
							
							and the UI module should bind
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
public Provider&lt;IAllContainersState&gt; provideIAllContainersState() {
  return org.eclipse.xtext.ui.shared.Access.getWorkspaceProjectsState();
}</pre>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="resource_set_containers" style="padding-top: 68px; margin-top: -68px;">
						<h5>ResourceSet-Based Containers</h5>
						<p>
							If you need an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IContainer.Manager.html"><abbr title="org.eclipse.xtext.resource.IContainer$Manager">Manager</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IContainer.java">(src)</a> that is independent of 
							Eclipse projects, you can use the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/containers/ResourceSetBasedAllContainersState.html"><abbr title="org.eclipse.xtext.resource.containers.ResourceSetBasedAllContainersState">ResourceSetBasedAllContainersState</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/containers/ResourceSetBasedAllContainersState.java">(src)</a>. 
							This one can be configured with a mapping of container handles to resource URIs.
						</p>
						<p>
							It is unlikely you want to use this strategy directly in your own code, but it is used in the back-end 
							of the MWE2 workflow component <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/mwe/Reader.html"><abbr title="org.eclipse.xtext.mwe.Reader">Reader</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/mwe/Reader.java">(src)</a>. This is responsible 
							for reading in models in a workflow, e.g. for later code generation. The 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/mwe/Reader.html"><abbr title="org.eclipse.xtext.mwe.Reader">Reader</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/mwe/Reader.java">(src)</a> allows to either scan the whole classpath or a set of paths 
							for all models therein. When paths are given, each path entry becomes an 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IContainer.html"><abbr title="org.eclipse.xtext.resource.IContainer">IContainer</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IContainer.java">(src)</a> of its own. In the following snippet,
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
component = org.eclipse.xtext.mwe.Reader {
  // lookup all resources on the classpath
  // useJavaClassPath = true
  
  // or define search scope explicitly
  path = "src/models"
  path = "src/further-models"

  ...
}</pre>
							<p>
						</p>
						</section>
						</section>
						</section>
						<!-- subsection -->
						<section id="local_scoping" style="padding-top: 68px; margin-top: -68px;">
						<h3>Local Scoping</h3>
						<p>
							We now know how the outer world of referenceable elements can be defined in Xtext. Nevertheless, not 
							everything is available in any context and with a global name. Rather than that, each context can usually 
							have a different scope. As already stated, scopes can be nested, i.e. a scope can in addition to its 
							own elements contain elements of a parent scope. When parent and child scope contain different elements 
							with the same name, the parent scope's element will usually be <strong>shadowed</strong> by the element from the child scope.
						</p>
						<p>
							To illustrate that, let's have a look at Java: Java defines multiple kinds of scopes 
							(object scope, type scope, etc.). For Java one would create the scope hierarchy as commented in the 
							following example:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
// file contents scope
import static my.Constants.STATIC;

public class ScopeExample { // class body scope
  private Object field = STATIC;

  private void method(String param) { // method body scope
    String localVar = "bar";
    innerBlock: { // block scope
      String innerScopeVar = "foo";
      Object field = innerScopeVar;
      // the scope hierarchy at this point would look like this:
      //  blockScope{field,innerScopeVar}-&gt;
      //  methodScope{localVar, param}-&gt;
      //  classScope{field}-&gt; ('field' is shadowed)
      //  fileScope{STATIC}-&gt;
      //  classpathScope{
      //      'all qualified names of accessible static fields'} -&gt;
      //  NULLSCOPE{}
      //
    }
    field.add(localVar);
  }
}</pre>
							<p>
						</p>
						<p>
							In fact the classpath scope should also reflect the order of classpath entries.
							For instance:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
classpathScope{stuff from bin/}
-&gt; classpathScope{stuff from foo.jar/}
-&gt; ...
-&gt; classpathScope{stuff from JRE System Library}
-&gt; NULLSCOPE{}</pre>
							<p>
						</p>
						<p>
							Please find the motivation behind this and some additional details in 
							<a href="http://blog.efftinge.de/2009/01/xtext-scopes-and-emf-index.html">this blog post</a> .
						</p>
						<!-- subsection -->
						<section id="_53" style="padding-top: 68px; margin-top: -68px;">
						<h4>Declarative Scoping</h4>
						<p>
							If you have to define scopes for certain contexts, the base class 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/impl/AbstractDeclarativeScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.impl.AbstractDeclarativeScopeProvider">AbstractDeclarativeScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/impl/AbstractDeclarativeScopeProvider.java">(src)</a> allows to do 
							that in a declarative way. It looks up methods which have either of the following two signatures:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
IScope scope_&lt;RefDeclaringEClass&gt;_&lt;Reference&gt;(
    &lt;ContextType&gt; ctx, EReference ref)

IScope scope_&lt;TypeToReturn&gt;(&lt;ContextType&gt; ctx, EReference ref)</pre>
							<p>
						</p>
						<p>
							The former is used when evaluating the scope for a specific cross-reference and here <strong>ContextReference</strong> 
							corresponds to the name of this reference (prefixed with the name of the reference's declaring type and 
							separated by an underscore). The <strong>ref</strong> parameter represents this cross-reference.
						</p>
						<p>
							The latter method signature is used when computing the scope for a given element type and is applicable 
							to all cross-references of that type. Here <strong>TypeToReturn</strong> is the name of that type.
						</p>
						<p>
							So if you for example have a state machine with a  <strong>Transition</strong> object owned by its source <strong>State</strong> and 
							you want to compute all reachable states (i.e. potential target states), the corresponding method could 
							be declared as follows (assuming the cross-reference is declared by the <strong>Transition</strong> type and is called <strong>target</strong>):
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
IScope scope_Transition_target(Transition this, EReference ref)</pre>
							<p>
						</p>
						<p>
							If such a method does not exist, the implementation will try to find one for the context object's container. 
							Thus in the example this would match a method with the same name but <strong>State</strong> as the type of the first 
							parameter. It will keep on walking the containment hierarchy until a matching method is found. This 
							container delegation allows to reuse the same scope definition for elements in different places of the 
							containment hierarchy. Also it may make the method easier to implement as the elements comprising the 
							scope are quite often owned or referenced by a container of the context object. In the example the 
							<strong>State</strong> objects could for instance be owned by a containing <strong>StateMachine</strong> object.
						</p>
						<p>
							If no method specific to the cross-reference in question was found for any of the objects in the 
							containment hierarchy, the implementation will start looking for methods matching the other signature.
							Again it will first attempt to match the context object. Thus in the 
							example the signature first matched would be:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
IScope scope_State(Transition this, EReference ref)</pre>
							<p>
						</p>
						<p>
							If no such method exists, the implementation will again try to find a method matching the context object's 
							container objects. In the case of the state machine example you might want to declare the scope with 
							available states at the state machine level:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
IScope scope_State(StateMachine this, EReference ref)</pre>
							<p>
						</p>
						<p>
							This scope can now be used for any cross-references of type <strong>State</strong> for context objects owned by the 
							state machine.
						</p>
						</section>
						</section>
						<!-- subsection -->
						<section id="namespaceImports" style="padding-top: 68px; margin-top: -68px;">
						<h3>Imported Namespace-Aware Scoping</h3>
						<p>
							The imported namespace aware scoping is based on qualified names and namespaces. It adds namespace 
							support to your language, which is comparable and similar to the one in Scala and C#. Scala and C# both 
							allow to have multiple nested packages within one file and you can put imports per namespace, so that 
							imported names are only visible within that namespace. See the domain model example: its scope provider 
							extends <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/impl/ImportedNamespaceAwareLocalScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.impl.ImportedNamespaceAwareLocalScopeProvider">ImportedNamespaceAwareLocalScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/impl/ImportedNamespaceAwareLocalScopeProvider.java">(src)</a>.
						</p>
						<!-- subsection -->
						<section id="_54" style="padding-top: 68px; margin-top: -68px;">
						<h4><a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/IQualifiedNameProvider.html"><abbr title="org.eclipse.xtext.naming.IQualifiedNameProvider">IQualifiedNameProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/IQualifiedNameProvider.java">(src)</a></h4>
						<p>
							The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/impl/ImportedNamespaceAwareLocalScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.impl.ImportedNamespaceAwareLocalScopeProvider">ImportedNamespaceAwareLocalScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/impl/ImportedNamespaceAwareLocalScopeProvider.java">(src)</a> 
							makes use of the so called <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/IQualifiedNameProvider.html"><abbr title="org.eclipse.xtext.naming.IQualifiedNameProvider">IQualifiedNameProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/IQualifiedNameProvider.java">(src)</a> 
							service. It computes <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/QualifiedName.html">QualifiedNames</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/QualifiedName.java">(src)</a> for 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html">EObjects</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a>. A qualified name consists of several segments
						</p>
						<p>
							The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/DefaultDeclarativeQualifiedNameProvider.html">default implementation</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/DefaultDeclarativeQualifiedNameProvider.java">(src)</a> uses 
							a simple name look up composes the qualified name of the simple names of all containers and the object
							itself.
						</p>
						<p>
							It also allows to override the name computation declaratively. The following snippet shows how you could 
							make <strong>Transitions</strong> in the state machine example referable by giving them a name. Don't forget to bind 
							your implementation in your runtime module.
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
FowlerDslQualifiedNameProvider 
      extends DefaultDeclarativeQualifiedNameProvider {
  public QualifiedName qualifiedName(Transition t) {
    if(t.getEvent() == null ||!(t.eContainer() instanceof State)) 
      return null;
    else 
      return QualifiedName.create((State)t.eContainer()).getName(), 
        t.getEvent().getName());
  }
}</pre>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="_55" style="padding-top: 68px; margin-top: -68px;">
						<h4>Importing Namespaces</h4>
						<p>
							The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/impl/ImportedNamespaceAwareLocalScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.impl.ImportedNamespaceAwareLocalScopeProvider">ImportedNamespaceAwareLocalScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/impl/ImportedNamespaceAwareLocalScopeProvider.java">(src)</a> looks up 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EAttribute.html">EAttributes</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EAttribute.java">(src)</a> with name 'importedNamespace' and 
							interprets them as import statements. By default qualified names with or without a wildcard at the end 
							are supported. For an import of a qualified name the simple name is made available as we know from e.g. 
							Java, where
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
import java.util.Set;</pre>
							<p>
						</p>
						<p>
							makes it possible to refer to <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Set.html">java.util.Set</a> by its simple name <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Set.html"><abbr title="java.util.Set">Set</abbr></a>.
							Contrary to Java the import is not active for the whole file but only for the namespace it is declared 
							in and its child namespaces. That is why you can write the following in the example DSL:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-domainexample linenums">
package foo {
  import bar.Foo
  entity Bar extends Foo {
  }
}

package bar {
  entity Foo {}
}</pre>
							<p>
						</p>
						<p>
							Of course the declared elements within a package are as well referable by their simple name:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-domainexample linenums">
package bar {
  entity Bar extends Foo {}
  entity Foo {}
}</pre>
							<p>
						</p>
						<p>
							The following would as well be ok:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-domainexample linenums">
package bar {
  entity Bar extends bar.Foo {}
  entity Foo {}
}</pre>
							<p>
						</p>
						<p>
							See the JavaDocs and <a href="http://blogs.itemis.de/stundzig/archives/773">this blog post</a> 
							for details.
						</p>
						</section>
						</section>
						</section>
						<!--  section -->
						<section id="valueconverter" style="padding-top: 68px; margin-top: -68px;">
						<h2 style="padding-top: 15px;">Value Converter</h2>
						<p>
							Value converters are registered to convert the parsed text into a data type instance and vice versa.
							The primary hook is the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/conversion/IValueConverterService.html"><abbr title="org.eclipse.xtext.conversion.IValueConverterService">IValueConverterService</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/IValueConverterService.java">(src)</a> 
							and the concrete implementation can be registered via the runtime <a href="documentation6.html#guicemodules">Guice module</a>.
							Simply override the corresponding binding in your runtime module like shown in this example:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
@Override
public Class&lt;? extends IValueConverterService&gt; 
    bindIValueConverterService() {
    return MySpecialValueConverterService.class;
}</pre>
							<p>
						</p>
						<p>
							The most simple way to register additional value converters is to make use of 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/conversion/impl/AbstractDeclarativeValueConverterService.html"><abbr title="org.eclipse.xtext.conversion.impl.AbstractDeclarativeValueConverterService">AbstractDeclarativeValueConverterService</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/impl/AbstractDeclarativeValueConverterService.java">(src)</a>, 
							which allows to declaratively register an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/conversion/IValueConverter.html"><abbr title="org.eclipse.xtext.conversion.IValueConverter">IValueConverter</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/IValueConverter.java">(src)</a>
							by means of an annotated method.
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
@ValueConverter(rule = "MyRuleName")
public IValueConverter&lt;MyDataType&gt; getMyRuleNameConverter() {
  return new MyValueConverterImplementation();
}</pre>
							<p>
						</p>
						<p>
							If you use the common terminals grammar <code class="prettyprint lang-xtext">org.eclipse.xtext.common.Terminals</code> you should extend the 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/common/services/DefaultTerminalConverters.html"><abbr title="org.eclipse.xtext.common.services.DefaultTerminalConverters">DefaultTerminalConverters</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/common/services/DefaultTerminalConverters.java">(src)</a> and override or 
							add value converters by adding the respective methods. In addition to the explicitly 
							defined converters in the default implementation, a delegating converter is registered for each 
							available <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EDataType.html"><abbr title="org.eclipse.emf.ecore.EDataType">EDataType</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EDataType.java">(src)</a>. The delegating converter reuses the functionality of the corresponding EMF 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EFactory.html"><abbr title="org.eclipse.emf.ecore.EFactory">EFactory</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EFactory.java">(src)</a>.
						</p>
						<p>
							Many languages introduce a concept for qualified names, i.e. names composed of namespaces separated by
							a delimiter. Since this is such a common use case, Xtext provides an extensible converter implementation
							for qualified names. The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/conversion/impl/QualifiedNameValueConverter.html"><abbr title="org.eclipse.xtext.conversion.impl.QualifiedNameValueConverter">QualifiedNameValueConverter</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/impl/QualifiedNameValueConverter.java">(src)</a> handles
							comments and white space gracefully and is capable to use the appropriate value converter for each segment of
							a qualified name. This allows for individually quoted segments. The domainmodel example shows how to use it.
						</p>
						<p>
							The protocol of an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/conversion/IValueConverter.html"><abbr title="org.eclipse.xtext.conversion.IValueConverter">IValueConverter</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/IValueConverter.java">(src)</a> allows to throw a 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/conversion/ValueConverterException.html"><abbr title="org.eclipse.xtext.conversion.ValueConverterException">ValueConverterException</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/ValueConverterException.java">(src)</a> if something went wrong.
							The exception is propagated as a syntax error by the parser or as a validation problem by the 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/validation/impl/ConcreteSyntaxValidator.html"><abbr title="org.eclipse.xtext.validation.impl.ConcreteSyntaxValidator">ConcreteSyntaxValidator</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/validation/impl/ConcreteSyntaxValidator.java">(src)</a> if the value cannot be converted 
							to a valid string. The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/conversion/impl/AbstractLexerBasedConverter.html"><abbr title="org.eclipse.xtext.conversion.impl.AbstractLexerBasedConverter">AbstractLexerBasedConverter</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/impl/AbstractLexerBasedConverter.java">(src)</a> is useful when 
							implementing a custom value converter. If the converter needs to know about the rule that it currently 
							works with, it may implement the interface <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/conversion/IValueConverter.RuleSpecific.html"><abbr title="org.eclipse.xtext.conversion.IValueConverter$RuleSpecific">RuleSpecific</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/IValueConverter.java">(src)</a>. 
							The framework will set the rule such as the implementation may use it afterwards.
						</p>
						</section>
						<!--  section -->
						<section id="serialization" style="padding-top: 68px; margin-top: -68px;">
						<h2 style="padding-top: 15px;">Serialization</h2>
						<p>
							Serialization is the process of transforming an EMF model into its textual representation. Thereby, 
							serialization complements parsing and lexing.
						</p>
						<p>
							In Xtext, the process of serialization is split into the following steps:
						</p>
						<p>
							</p>
							<ol>
								<li>Validating the semantic model. This is optional, enabled by default, done by the 
								<a href="documentation7.html#concrete_syntax_validation">concrete syntax validator</a> and can be turned off in 
								     the <a href="documentation7.html#saveoptions">save options</a>.</li>
								<li>Matching the model elements with the grammar rules and creating a stream of tokens. 
								     This is done by the <a href="documentation7.html#parsetreeconstructor">parse tree constructor</a>.</li>
								<li>Associating comments with semantic objects. This is done by the
								<a href="documentation7.html#commentassociater">comment associator</a>.</li>
								<li>Associating existing nodes from the node model with tokens from the token stream.</li>
								<li><a href="documentation7.html#hiddentokenmerger">Merging existing white space</a> and line-wraps into the token stream.</li>
								<li>Adding further needed white space or replacing all white space using a 
								<a href="documentation7.html#formatting">formatter</a>.</li>
							</ol>
							<p>
						</p>
						<p>
							Serialization is invoked when calling 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/XtextResource.html">XtextResource.save(..)</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/XtextResource.java">(src)</a>. Furthermore, the
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parsetree/reconstr/Serializer.html"><abbr title="org.eclipse.xtext.parsetree.reconstr.Serializer">Serializer</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parsetree/reconstr/Serializer.java">(src)</a> provides resource-independent 
							support for serialization. Another situation that triggers serialization is applying <a href="documentation8.html#quickfixes">Quick Fixes</a> 
							with semantic modifications. Serialization is <strong>not</strong> called when a textual editors contents is saved to disk.
						</p>
						<!-- subsection -->
						<section id="serializationcontract" style="padding-top: 68px; margin-top: -68px;">
						<h3>The Contract</h3>
						<p>
							The contract of serialization says that a model which is saved (serialized) to its textual representation 
							and then loaded (parsed) again yields a new model that is equal to the original model. Please be 
							aware that this does <strong>not</strong> imply, that loading a textual representation and serializing it back produces 
							identical textual representations. However, the serialization algorithm tries to restore as much information
							as possible. That is, if the parsed model was not modified in-memory, the serialized output will usually
							be equal to the previous input. Unfortunately, this cannot be ensured for each and every case. A use
							case where is is hardly possible, is shown in the following example:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-xtext linenums">
MyRule:
  (xval+=ID | yval+=INT)*;</pre>
							<p>
						</p>
						<p>
							The given <strong>MyRule</strong> reads <strong>ID</strong>- and <strong>INT</strong>-elements which may occur in an arbitrary order in 
							the textual representation. However, when serializing the model all <strong>ID</strong>-elements will be written 
							first and then all <strong>INT</strong>-elements. If the order is important it can be preserved by storing all elements 
							in the same list - which may require wrapping the <strong>ID</strong>- and <strong>INT</strong>-elements into other objects.
						</p>
						</section>
						<!-- subsection -->
						<section id="_56" style="padding-top: 68px; margin-top: -68px;">
						<h3>Roles of the Semantic Model and the Node Model During Serialization</h3>
						<p>
							A serialized document represents the state of the semantic model. However, if there is a node model 
							available (i.e. the semantic model has been created by the parser), the serializer
							</p>
							<ul>
								<li>preserves <a href="documentation7.html#hiddentokenmerger">existing white spaces</a> from the node model.</li>
								<li>preserves <a href="documentation7.html#commentassociater">existing comments</a> from the node model.</li>
								<li>preserves the representation of cross-references: If a cross-referenced object can be 
								     identified by multiple names (i.e. scoping returns multiple 
								<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IEObjectDescription.html">IEObjectDescriptions</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IEObjectDescription.java">(src)</a> for the 
								     same object), the serializer tries to keep the name that was used in the input file.</li>
								<li>preserves the representation of values: For values handled by the 
								<a href="documentation7.html#valueconverter">value converter</a>, the serializer checks whether the textual representation 
								    converted to a value equals the value from the semantic model. If that is true, the textual 
								    representation is kept.</li>
							</ul>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="parsetreeconstructor" style="padding-top: 68px; margin-top: -68px;">
						<h3>Parse Tree Constructor</h3>
						<p>
							The parse tree constructor usually does not need to be customized since it is automatically derived 
							from the <a href="documentation5.html#grammarLanguage">Xtext Grammar</a>. However, it can be helpful to look into it to understand 
							its error messages and its runtime performance.
						</p>
						<p>
							For serialization to succeed, the parse tree constructor must be able to <strong>consume</strong> every non-transient 
							element of the to-be-serialized EMF model. To <strong>consume</strong> means, in this context, to write the element to 
							the textual representation of the model. This can turn out to be a not-so-easy-to-fulfill requirement, 
							since a grammar usually introduces implicit constraints to the EMF model as explained for the 
							<a href="documentation7.html#concrete_syntax_validation">concrete syntax validator</a>.
						</p>
						<p>
							If a model can not be serialized, an 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parsetree/reconstr/XtextSerializationException.html"><abbr title="org.eclipse.xtext.parsetree.reconstr.XtextSerializationException">XtextSerializationException</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parsetree/reconstr/XtextSerializationException.java">(src)</a> is thrown. 
							Possible reasons are listed below:
						</p>
						<p>
							</p>
							<ul>
								<li>A model element can not be consumed. This can have the following reasons/solutions:
								<ul>
									<li>The model element should not be stored in the model.</li>
									<li>The grammar needs an assignment which would consume the model element.</li>
									<li>The <a href="documentation7.html#transientvalues">transient value service</a> can be used to indicate that this model 
									      element should not be consumed.</li>
								</ul></li>
								<li>An assignment in the grammar has no corresponding model element. The default transient 
								    value service considers a model element to be transient if it is <strong>unset</strong> or <strong>equals</strong> its 
								    default value. However, the parse tree constructor may serialize default values if 
								    this is required by a grammar constraint to be able to serialize another model element.
								    The following solution may help to solve such a scenario:
								<ul>
									<li>A model element should be added to the model.</li>
									<li>The assignment in the grammar should be made optional.</li>
								</ul></li>
								<li>The type of the model element differs from the type in the grammar. The type of the model 
								    element must be identical to the return type of the grammar rule or the action's type. 
								    Subtypes are not allowed.</li>
								<li><a href="documentation7.html#valueconverter">Value conversion</a> fails. The value converter can indicate that a value 
								    is not serializeable by throwing a <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/conversion/ValueConverterException.html"><abbr title="org.eclipse.xtext.conversion.ValueConverterException">ValueConverterException</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/conversion/ValueConverterException.java">(src)</a>.</li>
								<li>An enum literal is not allowed at this position. This can happen if the referenced enum 
								    rule only lists a subset of the literals of the actual enumeration.</li>
							</ul>
							<p>
						</p>
						<p>
							To understand error messages and performance issues of the parse tree constructor it is important to 
							know that it implements a backtracking algorithm. This basically means that the grammar is used to 
							specify the structure of a tree in which one path (from the root node to a leaf node) is a valid 
							serialization of a specific model. The parse tree constructor's task is to find this path - with the 
							condition, that all model elements are consumed while walking this path. The parse tree constructor's 
							strategy is to take the most promising branch first (the one that would consume the most model elements). 
							If the branch leads to a dead end (for example, if a model element needs to be consumed that is not 
							present in the model), the parse tree constructor goes back the path until a different branch can be 
							taken. This behavior has two consequences:
							</p>
							<ul>
								<li>In case of an error, the parse tree constructor has found only dead ends but no leaf. It cannot
								    tell which dead end is actually erroneous. Therefore, the error message lists dead ends of the 
								    longest paths, a fragment of their serialization and the reason why the path could not be continued 
								    at this point. The developer has to judge on his own which reason is the actual error.</li>
								<li>For reasons of performance, it is critical that the parse tree constructor takes the most promising
								    branch first and detects wrong branches early. One way to achieve this is to avoid having many rules 
								    which return the same type and which are called from within the same alternative in the grammar.</li>
							</ul>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="saveoptions" style="padding-top: 68px; margin-top: -68px;">
						<h3>Options</h3>
						<p>
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/SaveOptions.html"><abbr title="org.eclipse.xtext.resource.SaveOptions">SaveOptions</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/SaveOptions.java">(src)</a> can be passed to 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/XtextResource.html">XtextResource.save(options)</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/XtextResource.java">(src)</a> and to 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parsetree/reconstr/Serializer.html">Serializer.serialize(..)</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parsetree/reconstr/Serializer.java">(src)</a>. 
							Available options are:
							</p>
							<ul>
								<li><strong>Formatting</strong>. Default: <code class="prettyprint lang-java">false</code>. If enabled, it is the <a href="documentation7.html#formatting">formatters</a> job to determine
								     all white space information during serialization. If disabled, the formatter only defines white
								     space 
								     information for the places in which no white space information can be preserved from the node model. 
								     E.g. When new model elements are inserted or there is no node model.</li>
								<li><strong>Validating</strong>. Default: <code class="prettyprint lang-java">true</code>: Run the <a href="documentation7.html#concrete_syntax_validation">concrete syntax validator</a> 
								    before serializing the model.</li>
							</ul>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="commentassociater" style="padding-top: 68px; margin-top: -68px;">
						<h3>Preserving Comments from the Node Model</h3>
						<p>
							The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parsetree/reconstr/ICommentAssociater.html"><abbr title="org.eclipse.xtext.parsetree.reconstr.ICommentAssociater">ICommentAssociater</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parsetree/reconstr/ICommentAssociater.java">(src)</a> associates 
							comments with semantic objects. This is important in case an element in the semantic model is moved 
							to a different position and the model is serialized, one expects the comments to be moved to the 
							new position in the document as well.
						</p>
						<p>
							Which comment belongs to which semantic object is surely a very subjective issue. The 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parsetree/reconstr/impl/DefaultCommentAssociater.html">default 
							implementation</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parsetree/reconstr/impl/DefaultCommentAssociater.java">(src)</a>
							behaves as follows, but can be customized:
							</p>
							<ul>
								<li>If there is a semantic token before a comment and in the same line, the comment is associated 
								    with this token's semantic object.</li>
								<li>In all other cases, the comment is associated with the semantic object of the next following 
								    object.</li>
							</ul>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="transientvalues" style="padding-top: 68px; margin-top: -68px;">
						<h3>Transient Values</h3>
						<p>
							Transient values are values or model elements which are not persisted (written to the textual 
							representation in the serialization phase). If a model contains model elements which can not be serialized 
							with the current grammar, it is critical to mark them transient using the 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parsetree/reconstr/ITransientValueService.html"><abbr title="org.eclipse.xtext.parsetree.reconstr.ITransientValueService">ITransientValueService</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parsetree/reconstr/ITransientValueService.java">(src)</a>, or serialization 
							will fail. The default implementation marks all model elements transient, which are <code class="prettyprint lang-java">eStructuralFeature.isTransient()</code> 
							or not <code class="prettyprint lang-java">eObject.eIsSet(eStructuralFeature)</code>. By default, EMF returns <code class="prettyprint lang-java">false</code> for <code class="prettyprint lang-java">eIsSet(..)</code> if the 
							value equals the default value.
						</p>
						</section>
						<!-- subsection -->
						<section id="unassignedtext" style="padding-top: 68px; margin-top: -68px;">
						<h3>Unassigned Text</h3>
						<p>
							If there are calls of data type rules or terminal rules that do not reside in an assignment, 
							the serializer by default doesn't know which value to use for serialization.
						</p>
						<p>
							Example:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-xtext linenums">
PluralRule:
  'contents:' count=INT Plural;
  
terminal Plural: 
  'item' | 'items';</pre>
							<p>
						</p>
						<p>
							Valid models for this example are <strong>contents 1 item</strong> or <strong>contents 5 items</strong>. However, it is not stored 
							in the semantic model whether the keyword <strong>item</strong> or <strong>items</strong> has been parsed. This is due to the fact 
							that the rule call <strong>Plural</strong> is unassigned. However, the <a href="documentation7.html#parsetreeconstructor">parse tree constructor</a> 
							needs to decide which value to write during serialization. This decision can be be made by customizing 
							the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parsetree/reconstr/ITokenSerializer.IValueSerializer.html">IValueSerializer.serializeUnassignedValue(EObject, RuleCall, INode)</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parsetree/reconstr/ITokenSerializer.java">(src)</a>.
						</p>
						</section>
						<!-- subsection -->
						<section id="crossreferenceserializer" style="padding-top: 68px; margin-top: -68px;">
						<h3>Cross-Reference Serializer</h3>
						<p>
							The cross-reference serializer specifies which values are to be written to the textual representation 
							for cross-references. This behavior can be customized by implementing 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parsetree/reconstr/ITokenSerializer.ICrossReferenceSerializer.html"><abbr title="org.eclipse.xtext.parsetree.reconstr.ITokenSerializer$ICrossReferenceSerializer">ICrossReferenceSerializer</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parsetree/reconstr/ITokenSerializer.java">(src)</a>. 
							The default implementation delegates to various other services such as the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/IScopeProvider.html"><abbr title="org.eclipse.xtext.scoping.IScopeProvider">IScopeProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/IScopeProvider.java">(src)</a> or the 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/linking/impl/LinkingHelper.html"><abbr title="org.eclipse.xtext.linking.impl.LinkingHelper">LinkingHelper</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/linking/impl/LinkingHelper.java">(src)</a> each of which may be the better place for customization.
						</p>
						</section>
						<!-- subsection -->
						<section id="hiddentokenmerger" style="padding-top: 68px; margin-top: -68px;">
						<h3>Merge White Space</h3>
						<p>
							After the <a href="documentation7.html#parsetreeconstructor">parse tree constructor</a> has done its job to create a stream of 
							tokens which are to be written to the textual representation, and the <a href="documentation7.html#commentassociater">comment associator</a> 
							has done its work, existing white space form the node model is merged into the stream.
						</p>
						<p>
							The strategy is as follows: If two tokens follow each other in the stream and the corresponding 
							nodes in the node model follow each other as well, then the white space information in between is kept. 
							In all other cases it is up to the <a href="documentation7.html#formatting">formatter</a> to calculate new white space information.
						</p>
						</section>
						<!-- subsection -->
						<section id="tokenstream" style="padding-top: 68px; margin-top: -68px;">
						<h3>Token Stream</h3>
						<p>
							The <a href="documentation7.html#parsetreeconstructor">parse tree constructor</a> and the <a href="documentation7.html#formatting">formatter</a> use an 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parsetree/reconstr/ITokenStream.html"><abbr title="org.eclipse.xtext.parsetree.reconstr.ITokenStream">ITokenStream</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parsetree/reconstr/ITokenStream.java">(src)</a> for their output, and the 
							latter for its input as well. This allows for chaining the two components. Token streams can be converted to a <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html"><abbr title="java.lang.String">String</abbr></a> 
							using the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parsetree/reconstr/impl/TokenStringBuffer.html"><abbr title="org.eclipse.xtext.parsetree.reconstr.impl.TokenStringBuffer">TokenStringBuffer</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parsetree/reconstr/impl/TokenStringBuffer.java">(src)</a> and to 
							a <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Writer.html"><abbr title="java.io.Writer">Writer</abbr></a> using the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parsetree/reconstr/impl/WriterTokenStream.html"><abbr title="org.eclipse.xtext.parsetree.reconstr.impl.WriterTokenStream">WriterTokenStream</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parsetree/reconstr/impl/WriterTokenStream.java">(src)</a>.
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
public interface ITokenStream {

  void flush() throws IOException;
  void writeHidden(EObject grammarElement, String value);
  void writeSemantic(EObject grammarElement, String value);
}</pre>
							<p>
						</p>
						</section>
						</section>
						<!--  section -->
						<section id="formatting" style="padding-top: 68px; margin-top: -68px;">
						<h2 style="padding-top: 15px;">Formatting (Pretty Printing)</h2>
						<p>
							A formatter can be implemented via the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/formatting/IFormatter.html"><abbr title="org.eclipse.xtext.formatting.IFormatter">IFormatter</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/formatting/IFormatter.java">(src)</a> 
							service. Technically speaking, a formatter is a <a href="documentation7.html#tokenstream">Token Stream</a> which 
							inserts/removes/modifies hidden tokens (white space, line-breaks, comments).
						</p>
						<p>
							The formatter is invoked during the <a href="documentation7.html#serialization">serialization phase</a> and when the user triggers 
							formatting in the editor (for example, using the CTRL+SHIFT+F shortcut).
						</p>
						<p>
							Xtext ships with two formatters:
							</p>
							<ul>
								<li>The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/formatting/impl/OneWhitespaceFormatter.html"><abbr title="org.eclipse.xtext.formatting.impl.OneWhitespaceFormatter">OneWhitespaceFormatter</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/formatting/impl/OneWhitespaceFormatter.java">(src)</a> simply writes one 
								    white space between all tokens.</li>
								<li>The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/formatting/impl/AbstractDeclarativeFormatter.html"><abbr title="org.eclipse.xtext.formatting.impl.AbstractDeclarativeFormatter">AbstractDeclarativeFormatter</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/formatting/impl/AbstractDeclarativeFormatter.java">(src)</a> allows advanced 
								    configuration using a <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/formatting/impl/FormattingConfig.html"><abbr title="org.eclipse.xtext.formatting.impl.FormattingConfig">FormattingConfig</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/formatting/impl/FormattingConfig.java">(src)</a>. Both are explained
								    below.</li>
							</ul>
							<p>
						</p>
						<p>
							A declarative formatter can be implemented by subclassing 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/formatting/impl/AbstractDeclarativeFormatter.html"><abbr title="org.eclipse.xtext.formatting.impl.AbstractDeclarativeFormatter">AbstractDeclarativeFormatter</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/formatting/impl/AbstractDeclarativeFormatter.java">(src)</a>, as shown in 
							the following example:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
public class ExampleFormatter extends AbstractDeclarativeFormatter {

  @Override
  protected void configureFormatting(FormattingConfig c) {
    ExampleLanguageGrammarAccess f = getGrammarAccess();
    
    c.setAutoLinewrap(120);
    
    // find common keywords an specify formatting for them
    for (Pair&lt;Keyword, Keyword&gt; pair : f.findKeywordPairs("(", ")")) {
      c.setNoSpace().after(pair.getFirst());
      c.setNoSpace().before(pair.getSecond());
    }
    for (Keyword comma : f.findKeywords(",")) {
      c.setNoSpace().before(comma);
    }

    // formatting for grammar rule Line
    c.setLinewrap(2).after(f.getLineAccess().getSemicolonKeyword_1());
    c.setNoSpace().before(f.getLineAccess().getSemicolonKeyword_1());
    
    // formatting for grammar rule TestIndentation
    c.setIndentationIncrement().after(
        f.getTestIndentationAccess().getLeftCurlyBracketKeyword_1());
    c.setIndentationDecrement().before(
        f.getTestIndentationAccess().getRightCurlyBracketKeyword_3());
    c.setLinewrap().after(
        f.getTestIndentationAccess().getLeftCurlyBracketKeyword_1());
    c.setLinewrap().after(
        f.getTestIndentationAccess().getRightCurlyBracketKeyword_3());
    
    // formatting for grammar rule Param
    c.setNoLinewrap().around(f.getParamAccess().getColonKeyword_1());
    c.setNoSpace().around(f.getParamAccess().getColonKeyword_1());
    
    // formatting for Comments 
    cfg.setLinewrap(0, 1, 2).before(g.getSL_COMMENTRule());
    cfg.setLinewrap(0, 1, 2).before(g.getML_COMMENTRule());
    cfg.setLinewrap(0, 1, 1).after(g.getML_COMMENTRule());
  }
}</pre>
							<p>
						</p>
						<p>
							The formatter has to implement the method <code class="prettyprint lang-java">configureFormatting(...)</code> which declaratively sets up 
							a <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/formatting/impl/FormattingConfig.html"><abbr title="org.eclipse.xtext.formatting.impl.FormattingConfig">FormattingConfig</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/formatting/impl/FormattingConfig.java">(src)</a>.
						</p>
						<p>
							The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/formatting/impl/FormattingConfig.html"><abbr title="org.eclipse.xtext.formatting.impl.FormattingConfig">FormattingConfig</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/formatting/impl/FormattingConfig.java">(src)</a> consist of general 
							settings and a set of formatting instructions:
						</p>
						<!-- subsection -->
						<section id="_57" style="padding-top: 68px; margin-top: -68px;">
						<h3>General FormattingConfig Settings</h3>
						<p>
							<code class="prettyprint lang-java">setAutoLinewrap(int)</code> defines the amount of characters after which a line-break should 
							be dynamically inserted between two tokens. The instructions <code class="prettyprint lang-java">setNoLinewrap().???()</code>, 
							<code class="prettyprint lang-java">setNoSpace().???()</code> and <code class="prettyprint lang-java">setSpace(space).???()</code> suppress this behavior locally. 
							The default is 80.
						</p>
						</section>
						<!-- subsection -->
						<section id="_58" style="padding-top: 68px; margin-top: -68px;">
						<h3>FormattingConfig Instructions</h3>
						<p>
							Per default, the declarative formatter inserts one white space between two 
							tokens. Instructions can be used to specify a different behavior. They consist of two parts: <strong>When</strong> 
							to apply the instruction and <strong>what</strong> to do.
						</p>
						<p>
							To understand <strong>when</strong> an instruction is applied think of a stream of tokens whereas each token is 
							associated with the corresponding grammar element. The instructions are matched against these grammar 
							elements. The following matching criteria exist:
							</p>
							<ul>
								<li><code class="prettyprint lang-java">after(element)</code>: The instruction is applied after the grammar element has been matched. 
								    For example, if your grammar uses the keyword <code class="prettyprint lang-xtext">";"</code> to end lines, this can instruct the formatter 
								    to insert a line break after the semicolon.</li>
								<li><code class="prettyprint lang-java">before(element)</code>: The instruction is executed before the matched element. For example, if your 
								    grammar contains lists which separate their values with the keyword <code class="prettyprint lang-xtext">","</code>, you can instruct the 
								    formatter to suppress the white space before the comma.</li>
								<li><code class="prettyprint lang-java">around(element)</code>: This is the same as <code class="prettyprint lang-java">before(element)</code> combined with <code class="prettyprint lang-java">after(element)</code>.</li>
								<li><code class="prettyprint lang-java">between(left, right)</code>: This matches if <strong>left</strong> directly follows <strong>right</strong> in the document. 
								    There may be no other tokens in between <strong>left</strong> and <strong>right</strong>.</li>
								<li><code class="prettyprint lang-java">bounds(left, right)</code>: This is the same as <code class="prettyprint lang-java">after(left)</code> combined with  <code class="prettyprint lang-java">before(right)</code>.</li>
								<li><code class="prettyprint lang-java">range(start, end)</code>: The rule is enabled when <strong>start</strong> is matched, and disabled when <strong>end</strong> 
								    is matched. Thereby, the rule is active for the complete region which is surrounded by <strong>start</strong> 
								    and <strong>end</strong>.</li>
							</ul>
							<p>
						</p>
						<p>
							The term <strong>tokens</strong> is used slightly different here compared to the parser/lexer. Here, a token is a 
							keyword or the string that is matched by a terminal rule, data type rule or cross-reference. In the 
							terminology of the lexer a data type rule can match a composition of multiple tokens.
						</p>
						<p>
							The parameter <strong>element</strong> can be a grammar's <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/AbstractElement.html"><abbr title="org.eclipse.xtext.AbstractElement">AbstractElement</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/emf-gen/org/eclipse/xtext/AbstractElement.java">(src)</a> or a grammar's 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/AbstractRule.html"><abbr title="org.eclipse.xtext.AbstractRule">AbstractRule</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/emf-gen/org/eclipse/xtext/AbstractRule.java">(src)</a>. All grammar 
							rules and almost all abstract elements can be matched. This includes rule calls, parser rules, groups 
							and alternatives. The semantic of <code class="prettyprint lang-java">before(element)</code>, <code class="prettyprint lang-java">after(element)</code>, etc. for rule calls and parser rules is 
							identical to when the parser would "pass" this part of the grammar. The stack of called rules is taken 
							into account. The following abstract elements can <strong>not</strong> have assigned formatting instructions:
							</p>
							<ul>
								<li>Actions. E.g. <code class="prettyprint lang-xtext">{MyAction}</code> or <code class="prettyprint lang-xtext">{MyAction.myFeature=current}</code>.</li>
								<li>Grammar elements nested in data type rules. This is due to to the fact that tokens matched 
								    by a data type rule are treated as atomic by the serializer. To format these tokens, please 
								    implement a <a href="documentation7.html#valueconverter">ValueConverter</a>.</li>
								<li>Grammar elements nested in <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/CrossReference.html"><abbr title="org.eclipse.xtext.CrossReference">CrossReference</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/emf-gen/org/eclipse/xtext/CrossReference.java">(src)</a>.</li>
							</ul>
							<p>
						</p>
						<p>
							After having explained how rules can be activated, this is what they can do:
							</p>
							<ul>
								<li><code class="prettyprint lang-java">setIndentationIncrement()</code> increments indentation by one unit at this position. Whether 
								    one unit consists of one tab-character or spaces is defined by 
								<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/formatting/IIndentationInformation.html"><abbr title="org.eclipse.xtext.formatting.IIndentationInformation">IIndentationInformation</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/formatting/IIndentationInformation.java">(src)</a>. The default implementation 
								    consults Eclipse's <a href="http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/preference/IPreferenceStore.html"><abbr title="org.eclipse.jface.preference.IPreferenceStore">IPreferenceStore</abbr></a>.</li>
								<li><code class="prettyprint lang-java">setIndentationDecrement()</code> decrements indentation by one unit.</li>
								<li><code class="prettyprint lang-java">setLinewrap()</code>: Inserts a line-wrap at this position.</li>
								<li><code class="prettyprint lang-java">setLinewrap(int count)</code>: Inserts <strong>count</strong> numbers of line-wrap at this position.</li>
								<li><code class="prettyprint lang-java">setLinewrap(int min, int def, int max)</code>: If the amount of line-wraps that have been 
								    at this position before formatting can be determined (i.e. when a node model is present), 
								    then the amount of of line-wraps is adjusted to be within the interval <strong>min</strong>, <strong>max</strong> 
								    and is then reused. In all other cases <strong>def</strong> line-wraps are inserted. Example: 
								<code class="prettyprint lang-java">setLinewrap(0, 0, 1)</code> will preserve existing line-wraps, but won't allow more than one 
								    line-wrap between two tokens.</li>
								<li><code class="prettyprint lang-java">setNoLinewrap()</code>: Suppresses automatic line wrap, which may occur when the line's length 
								    exceeds the defined limit.</li>
								<li><code class="prettyprint lang-java">setSpace(String space)</code>: Inserts the string <strong>space</strong> at this position. If you use this 
								    to insert something else than white space, tabs or newlines, a small puppy will die somewhere 
								    in this world.</li>
								<li><code class="prettyprint lang-java">setNoSpace()</code>: Suppresses the white space between tokens at this position. Be aware that 
								    between some tokens a white space is required to maintain a valid concrete syntax.</li>
							</ul>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="_59" style="padding-top: 68px; margin-top: -68px;">
						<h3>Grammar Element Finders</h3>
						<p>
							Sometimes, if a grammar contains many similar elements for which the same formatting instructions ought 
							to apply, it can be tedious to specify them for each grammar element individually. The 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/IGrammarAccess.html"><abbr title="org.eclipse.xtext.IGrammarAccess">IGrammarAccess</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/IGrammarAccess.java">(src)</a> provides convenience methods for this. The 
							find methods are available for the grammar and for each parser rule.
						</p>
						<p>
							</p>
							<ul>
								<li><code class="prettyprint lang-java">findKeywords(String... keywords)</code> returns all keywords that equal one of the parameters.</li>
								<li><code class="prettyprint lang-java">findKeywordPairs(String leftKw, String rightKw)</code>: returns tuples of keywords from the same 
								    grammar rule. Pairs are matched nested and sequentially.  Example: for <code class="prettyprint lang-xtext">Rule: '(' name=ID ('(' foo=ID ')') ')' | '(' bar=ID ')'</code> 
								<code class="prettyprint lang-java">findKeywordPairs("(", ")")</code> returns three pairs.</li>
							</ul>
							<p>
						</p>
						</section>
						</section>
						<!--  section -->
						<section id="fragmentProvider" style="padding-top: 68px; margin-top: -68px;">
						<h2 style="padding-top: 15px;">Fragment Provider (Referencing Xtext Models From Other EMF Artifacts)</h2>
						<p>
							Although inter-Xtext linking is not done by URIs, you may want to be able to reference your <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a> 
							from non-Xtext models. In those cases URIs are used, which are made up of a part identifying the resource 
							and a second part that points to an object. 
							Each <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a> contained in a resource can be identified by a so called <strong>fragment</strong>.
						</p>
						<p>
							A fragment is a part of an EMF URI and needs to be unique per resource.
						</p>
						<p>
							The generic resource shipped with EMF provides a generic path-like computation of fragments. These 
							fragment paths are unique by default and do not have to be serialized. On the other hand, they can be 
							easily broken by reordering the elements in a resource.
						</p>
						<p>
							With an XMI or other binary-like serialization it is also common and possible to use UUIDs. UUIDs 
							are usually binary and technical, so you don't want to deal with them in human readable representations.
						</p>
						<p>
							However with a textual concrete syntax we want to be able to compute fragments out of the human readable 
							information. We don't want to force people to use UUIDs (i.e. synthetic identifiers) or fragile, relative, generic 
							paths in order to refer to <a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html">EObjects</a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a>.
						</p>
						<p>
							Therefore one can contribute an <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IFragmentProvider.html"><abbr title="org.eclipse.xtext.resource.IFragmentProvider">IFragmentProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IFragmentProvider.java">(src)</a> 
							per language. It has two methods: <code class="prettyprint lang-java">getFragment(EObject, Fallback)</code> to calculate the fragment of an 
							<a href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html"><abbr title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> <a href="https://github.com/eclipse/emf/blob/R2_8_0/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/EObject.java">(src)</a> and <code class="prettyprint lang-java">getEObject(Resource, String, Fallback)</code> to go the opposite direction. 
							The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IFragmentProvider.Fallback.html"><abbr title="org.eclipse.xtext.resource.IFragmentProvider$Fallback">Fallback</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IFragmentProvider.java">(src)</a> interface allows to delegate to the default strategy - 
							which usually uses the fragment paths described above.
						</p>
						<p>
							The following snippet shows how to use qualified names as fragments:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
public QualifiedNameFragmentProvider implements IFragmentProvider {

  @Inject
  private IQualifiedNameProvider qualifiedNameProvider;

  public String getFragment(EObject obj, Fallback fallback) {
    String qName = qualifiedNameProvider.getQualifiedName(obj);
    return qName != null ? qName : fallback.getFragment(obj);
  }

  public EObject getEObject(Resource resource, 
                            String fragment, 
                            Fallback fallback) {
    if (fragment != null) {
      Iterator&lt;EObject&gt; i = EcoreUtil.getAllContents(resource, false);
      while(i.hasNext()) {
        EObject eObject = i.next();
        String candidateFragment = (eObject.eIsProxy()) 
            ? ((InternalEObject) eObject).eProxyURI().fragment()
            : getFragment(eObject, fallback);
        if (fragment.equals(candidateFragment)) 
          return eObject;
      }
    }
    return fallback.getEObject(fragment);
  }
}</pre>
							<p>
						</p>
						<p>
							For performance reasons it is usually a good idea to navigate the resource based on the fragment 
							information instead of traversing it completely. If you know that your fragment is computed from 
							qualified names and your model contains something like <strong>NamedElements</strong>, you should split your fragment
							into those parts and query the root elements, the children of the best match and so on.
						</p>
						<p>
							Furthermore it's a good idea to have some kind of conflict resolution strategy to be able to distinguish
							between equally named elements that actually are different, e.g. properties may have the very same qualified
							name as entities.
						</p>
						</section>
						<!--  section -->
						<section id="encoding" style="padding-top: 68px; margin-top: -68px;">
						<h2 style="padding-top: 15px;">Encoding in Xtext</h2>
						<p>
							Encoding, aka <strong>character set</strong>, describes the way characters are encoded into bytes and vice versa. 
							Famous standard encodings are <strong>UTF-8</strong> or <strong>ISO-8859-1</strong>. The list of available encodings can be determined
							by calling <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/nio/charset/Charset.html">Charset.availableCharsets()</a>. There is also a list of encodings and their 
							canonical Java names in the <a href="http://download.oracle.com/javase/1.5.0/docs/guide/intl/encoding.doc.html">API docs</a>.
						</p>
						<p>
							Unfortunately, each platform and/or spoken language tends to define its own native encoding, 
							e.g. <strong>Cp1258</strong> on Windows in Vietnamese or <strong>MacIceland</strong> on Mac OS X in Icelandic.
						</p>
						<p>
							In an Eclipse workspace, files, folders, projects can have individual encodings, which are stored
							in the hidden file <strong>.settings/org.eclipse.core.resources.prefs</strong> in each project. If a resource does not have an 
							explicit encoding, it inherits the one from its parent recursively. Eclipse chooses the native
							platform encoding as the default for the workspace root. You can change the default workspace 
							encoding in the Eclipse preferences <strong>Preferences-&gt;Workspace-&gt;Default text encoding</strong>. If you develop on
							different platforms, you should consider choosing an explicit common encoding for your text or code
							files, especially if you use special characters.
						</p>
						<p>
							While Eclipse allows to define and inspect the encoding of a file, your file system usually doesn't. 
							Given an arbitrary text file there is no general strategy to tell how it was encoded. If you deploy 
							an Eclipse project as a jar (even a plug-in), any encoding information not stored in the file itself 
							is lost, too. Some languages define the encoding of a file explicitly, as in the first processing 
							instruction of an XML file. Most languages don't. Others imply a fixed encoding or offer enhanced 
							syntax for character literals, e.g. the unicode escape sequences <strong>\uXXXX</strong> in Java.
						</p>
						<p>
							As Xtext is about textual modeling, it allows to tweak the encoding in various places.
						</p>
						<!-- subsection -->
						<section id="_60" style="padding-top: 68px; margin-top: -68px;">
						<h3>Encoding at Language Design Time</h3>
						<p>
							The plug-ins created by the <strong>New Xtext Project</strong> wizard are by default encoded in the workspace's standard
							encoding. The same holds for all files that Xtext generates in there.
							If you want to change that, e.g. because your grammar uses/allows special characters, you should manually 
							set the encoding in the properties of these projects after their creation. Do this before 
							adding special characters to your grammar or at least make sure the grammar reads correctly after the 
							encoding change. To tell the Xtext generator to generate files in the same encoding, set the encoding 
							property in the workflow next to your grammar, e.g.
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-mwe2 linenums">
Generator {
  encoding ="UTF-8"
  ...</pre>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="_61" style="padding-top: 68px; margin-top: -68px;">
						<h3>Encoding at Language Runtime</h3>
						<p>
							As each language could handle the encoding problem differently, Xtext offers a service here. 
							The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parser/IEncodingProvider.html"><abbr title="org.eclipse.xtext.parser.IEncodingProvider">IEncodingProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parser/IEncodingProvider.java">(src)</a> has a single method 
							<code class="prettyprint lang-java">getEncoding(URI)</code> to define the encoding of the resource with the given URI. Users can implement 
							their own strategy but keep in mind that this is not intended to be a long running method. If the 
							encoding is stored within the model file itself, it should be extractable in an easy way, like from 
							the first line in an XML file. The default implementation returns the default Java character set 
							in the runtime scenario.
						</p>
						<p>
							In the UI scenario, when there is a workspace, users will expect the encoding of the model files 
							to be settable the same way as for other files in the workspace. The default implementation 
							of the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parser/IEncodingProvider.html"><abbr title="org.eclipse.xtext.parser.IEncodingProvider">IEncodingProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parser/IEncodingProvider.java">(src)</a> in the UI scenario therefore returns 
							the file's workspace encoding for files in the workspace and delegates to the runtime implementation 
							for all other resources, e.g. models in a jar or from a deployed plug-in. Keep in mind that you are 
							going to loose the workspace encoding information as soon as you leave this workspace, e.g. deploy your 
							project.
						</p>
						<p>
							Unless you want to enforce a uniform encoding for all models of your language, we advise to 
							override the runtime service only. It is bound in the runtime module using the binding annotation 
							<a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/service/DispatchingProvider.Runtime.html">@Runtime</a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/service/DispatchingProvider.java">(src)</a>:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
@Override
public void configureRuntimeEncodingProvider(Binder binder) {
    binder.bind(IEncodingProvider.class)
          .annotatedWith(DispatchingProvider.Runtime.class)
          .to(MyEncodingProvider.class);
}</pre>
							<p>
						</p>
						<p>
							For the uniform encoding, bind the plain <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parser/IEncodingProvider.html"><abbr title="org.eclipse.xtext.parser.IEncodingProvider">IEncodingProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parser/IEncodingProvider.java">(src)</a> to the same
							implementation in both modules:
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
@Override
public Class&lt;? extends IEncodingProvider&gt; bindIEncodingProvider() {
    return MyEncodingProvider.class;
}</pre>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="_62" style="padding-top: 68px; margin-top: -68px;">
						<h3>Encoding of an XtextResource</h3>
						<p>
							An <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/XtextResource.html"><abbr title="org.eclipse.xtext.resource.XtextResource">XtextResource</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/XtextResource.java">(src)</a> uses the <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parser/IEncodingProvider.html"><abbr title="org.eclipse.xtext.parser.IEncodingProvider">IEncodingProvider</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parser/IEncodingProvider.java">(src)</a> 
							of your language by default. You can override that by passing an option on load and save, e.g.
						</p>
						<p>
							</p>
							<pre class="prettyprint lang-java linenums">
Map&lt;?,?&gt; options = new HashMap();
options.put(XtextResource.OPTION_ENCODING, "UTF-8");
myXtextResource.load(options);

options.put(XtextResource.OPTION_ENCODING, "ISO-8859-1");
myXtextResource.save(options);</pre>
							<p>
						</p>
						</section>
						<!-- subsection -->
						<section id="_63" style="padding-top: 68px; margin-top: -68px;">
						<h3>Encoding in New Model Projects</h3>
						<p>
							The <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/ui/generator/projectWizard/SimpleProjectWizardFragment.html"><abbr title="org.eclipse.xtext.ui.generator.projectWizard.SimpleProjectWizardFragment">SimpleProjectWizardFragment</abbr></a> <a href="https://github.com/eclipse/xtext/blob/v2.3.0/plugins/org.eclipse.xtext.generator/src/org/eclipse/xtext/ui/generator/projectWizard/SimpleProjectWizardFragment.java">(src)</a> 
							generates a wizard that clients of your language can use to create model 
							projects. This wizard expects its templates to be in the encoding of the Generator that created it 
							(see above). As for every new project wizard, its output will be encoded in the default encoding of the 
							target workspace. If your language enforces a special encoding that ignores the workspace settings, you'll
							have to make sure that your wizard uses the right encoding by yourself.
						</p>
						</section>
						<!-- subsection -->
						<section id="_64" style="padding-top: 68px; margin-top: -68px;">
						<h3>Encoding of Xtext Source Code</h3>
						<p>
							The source code of the Xtext framework itself is completely encoded in <strong>ISO 8859-1</strong>, which is necessary 
							to make the Xpand templates work everywhere (they use french quotation markup). That encoding is hard 
							coded into the Xtext generator code. You are likely never going to change that.
						</p>
						</section>
						</section>
					</div>
				</div>
			</section>
		</div>
	</div>
</div>
	<div id="extra">
		<div class="inner">
			<div class="container">
				<div class="row">
					<div class="span6">
						<h3>Quick Links</h3>
						<ul class="footer-links clearfix">
							<li><a href="http://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li>
							<li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
							<li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
							<li><a href="http://www.eclipse.org/legal/">Legal</a></li>
						</ul>
						<ul class="footer-links clearfix">
	      			<li><a href="http://www.eclipse.org">Eclipse Home</a></li>
							<li><a href="http://marketplace.eclipse.org/">Market Place</a></li>
							<li><a href="http://live.eclipse.org/">Eclipse Live</a></li>
							<li><a href="http://www.planeteclipse.org/">Eclipse Planet</a></li>
						</ul>
					</div>
					<div class="span6">
						<h3><a href="https://twitter.com/#!/xtext" style="color: white;">Xtext</a> on Twitter</h3>
						<br />
						<div id="tweet">
							<p>Please wait while my tweets load</p>
							<p>
								<a href="http://twitter.com/rem">If you can't wait - check
									out what I've been twittering</a>
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Le javascript
	    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	
	<script src="js/bootstrap-transition.js"></script>
	<script src="js/bootstrap-alert.js"></script>
	<script src="js/bootstrap-modal.js"></script>
	<script src="js/bootstrap-dropdown.js"></script>
	<script src="js/bootstrap-scrollspy.js"></script>
	<script src="js/bootstrap-tab.js"></script>
	<script src="js/bootstrap-tooltip.js"></script>
	<script src="js/bootstrap-popover.js"></script>
	<script src="js/bootstrap-button.js"></script>
	<script src="js/bootstrap-collapse.js"></script>
	<script src="js/bootstrap-carousel.js"></script>
	<script src="js/bootstrap-typeahead.js"></script>
	
	<!-- include pretty-print files -->
	<script type="text/javascript" src="google-code-prettify/prettify.js"></script>
	<script type="text/javascript" src="google-code-prettify/lang-xtend.js"></script>
	
	<!-- Include the plug-in -->
	<script src="js/jquery.easing.1.3.js" type="text/javascript"></script>
	<script src="js/custom.js" type="text/javascript"></script>
	<script type="text/javascript" src="google-code-prettify/lang-common.js"></script><script type="text/javascript">
		registerLanguage('grammar|import|generate|terminal|enum|returns|with|hidden|as|current|fragment|EOF', 'xtext');
		registerLanguage('extends|super|instanceof|as|new|null|false|true|val|var|if|else|switch|case|default|do|while|for|typeof|throw|try|catch|finally|this|it|int|boolean|short|char|double|float|long|byte|void|return', 'xbase');
		registerLanguage('module|var|auto-inject|auto|inject|import|true|false', 'mwe2');
		registerLanguage('IMPORT|EXTENSION|FILE|ENDFILE|DEFINE|ENDDEFINE|FOR|ENDFOR|FOREACH|ENDFOREACH|AS|SEPARATOR|ITERATOR|EXPAND|REM|ENDREM|PROTECT|ENDPROTECT|this|IF|ENDIF|ELSE|null', 'xpand');
		registerLanguage('import|extension|this|create|cached|true|false|let|switch|case|if|then|else|context|WARNING|ERROR', 'check');
		registerLanguage('Hello', 'mydsl');
		registerLanguage('package|entity|datatype|many|import|extends|public|op|return|mapped-to', 'domainexample');
		registerLanguage('datatype|mapped-to', 'javatypesexample');
		registerLanguage('events|commands|state|actions|end|resetEvents', 'fowlerexample');
		registerLanguage('ref', 'linkingexample');
	</script>
</body>
</html>
