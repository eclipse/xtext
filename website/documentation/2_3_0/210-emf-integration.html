<br style="clear:both;height:1em;">
	<div id="leftcol">
		<div class="nav-logo">
			<a href="index.php"><img src="logo.png" style="margin-left:10px; width:155px"/></a>
		</div>
		<ul id="leftnav">
		<li class="partentry" >
		Getting Started
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="005-installation.php">Installation</a></div>
		<ul style="display: none;" id="subToc_005-installation.html">
		<li id="005-installation.html#InstallDistro.html" ><a href="005-installation.php#InstallDistro.php" >Install Pre-Configured Eclipse With Xtext</a></li>
		<li id="005-installation.html#InstallXtext.html" ><a href="005-installation.php#InstallXtext.php" >Install Xtext From Update Site</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="010-xtext-in-5-minutes.php">5 Minutes Tutorial</a></div>
		<ul style="display: none;" id="subToc_010-xtext-in-5-minutes.html">
		<li id="010-xtext-in-5-minutes.html#NewProject.html" ><a href="010-xtext-in-5-minutes.php#NewProject.php" >Creating A New Xtext Project</a></li>
		<li id="010-xtext-in-5-minutes.html#RunWorkflow.html" ><a href="010-xtext-in-5-minutes.php#RunWorkflow.php" >Generating The Language Infrastructure</a></li>
		<li id="010-xtext-in-5-minutes.html#TestingTheEditor.html" ><a href="010-xtext-in-5-minutes.php#TestingTheEditor.php" >Try The Editor</a></li>
		<li id="010-xtext-in-5-minutes.html#Conclusion.html" ><a href="010-xtext-in-5-minutes.php#Conclusion.php" >Conclusion</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="020-domainmodel-step-by-step.php">15 Minutes Tutorial</a></div>
		<ul style="display: none;" id="subToc_020-domainmodel-step-by-step.html">
		<li id="020-domainmodel-step-by-step.html#DomainmodelWalkThrough_4.html" ><a href="020-domainmodel-step-by-step.php#DomainmodelWalkThrough_4.php" >Create A New Xtext Project</a></li>
		<li id="020-domainmodel-step-by-step.html#DomainmodelWalkThrough_5.html" ><a href="020-domainmodel-step-by-step.php#DomainmodelWalkThrough_5.php" >Write Your Own Grammar</a></li>
		<li id="020-domainmodel-step-by-step.html#DomainmodelWalkThrough_6.html" ><a href="020-domainmodel-step-by-step.php#DomainmodelWalkThrough_6.php" >Generate Language Artifacts</a></li>
		<li id="020-domainmodel-step-by-step.html#DomainmodelWalkThrough_7.html" ><a href="020-domainmodel-step-by-step.php#DomainmodelWalkThrough_7.php" >Run the Generated IDE Plug-in</a></li>
		<li id="020-domainmodel-step-by-step.html#DomainmodelWalkThrough_8.html" ><a href="020-domainmodel-step-by-step.php#DomainmodelWalkThrough_8.php" >Second Iteration : Adding Packages and Imports</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="030-tutorial-next-steps.php">15 Minutes Tutorial - Extended</a></div>
		<ul style="display: none;" id="subToc_030-tutorial-next-steps.html">
		<li id="040-first-code-generator.html" ><a href="040-first-code-generator.php" >Writing a Code Generator With Xtend</a></li>
		<li id="060-unit-tests.html" ><a href="060-unit-tests.php" >Unit Testing the Language</a></li>
		<li id="050-validation.html" ><a href="050-validation.php" >Creating Custom Validation Rules</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="035-domainmodel-java.php">Five simple steps to your JVM language</a></div>
		<ul style="display: none;" id="subToc_035-domainmodel-java.html">
		<li id="035-domainmodel-java.html#JvmDomainmodel_7.html" ><a href="035-domainmodel-java.php#JvmDomainmodel_7.php" >Step One: Create A New Xtext Project</a></li>
		<li id="035-domainmodel-java.html#JvmDomainmodel_8.html" ><a href="035-domainmodel-java.php#JvmDomainmodel_8.php" >Step Two: Write the Grammar</a></li>
		<li id="035-domainmodel-java.html#JvmDomainmodel_9.html" ><a href="035-domainmodel-java.php#JvmDomainmodel_9.php" >Step Three: Generate Language Artifacts</a></li>
		<li id="035-domainmodel-java.html#JvmDomainmodel_10.html" ><a href="035-domainmodel-java.php#JvmDomainmodel_10.php" >Step Four: Define the Mapping to JVM Concepts</a></li>
		<li id="035-domainmodel-java.html#JvmDomainmodel_11.html" ><a href="035-domainmodel-java.php#JvmDomainmodel_11.php" >Step Five : Try the Editor!</a></li>
		</ul>
		</li>
		<li class="partentry" >
		Reference Documentation
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="000-introduction.php">Overview</a></div>
		<ul style="display: none;" id="subToc_000-introduction.html">
		<li id="000-introduction.html#Overview_1.html" ><a href="000-introduction.php#Overview_1.php" >What is Xtext?</a></li>
		<li id="000-introduction.html#Overview_2.html" ><a href="000-introduction.php#Overview_2.php" >How Does It Work?</a></li>
		<li id="000-introduction.html#Overview_3.html" ><a href="000-introduction.php#Overview_3.php" >Xtext is Highly Configurable</a></li>
		<li id="000-introduction.html#Overview_4.html" ><a href="000-introduction.php#Overview_4.php" >Who Uses Xtext?</a></li>
		<li id="000-introduction.html#Overview_5.html" ><a href="000-introduction.php#Overview_5.php" >Who is Behind Xtext?</a></li>
		<li id="000-introduction.html#DSL.html" ><a href="000-introduction.php#DSL.php" >What is a Domain-Specific Language</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="020-grammar-language.php">The Grammar Language</a></div>
		<ul style="display: none;" id="subToc_020-grammar-language.html">
		<li id="020-grammar-language.html#statemachine.html" ><a href="020-grammar-language.php#statemachine.php" >A First Example</a></li>
		<li id="020-grammar-language.html#syntax.html" ><a href="020-grammar-language.php#syntax.php" >The Syntax</a></li>
		<li id="020-grammar-language.html#metamodelInference.html" ><a href="020-grammar-language.php#metamodelInference.php" >Ecore Model Inference</a></li>
		<li id="020-grammar-language.html#grammarMixins.html" ><a href="020-grammar-language.php#grammarMixins.php" >Grammar Mixins</a></li>
		<li id="020-grammar-language.html#grammarLanguage_6.html" ><a href="020-grammar-language.php#grammarLanguage_6.php" >Common Terminals</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="030-generator.php">Configuration</a></div>
		<ul style="display: none;" id="subToc_030-generator.html">
		<li id="030-generator.html#generator.html" ><a href="030-generator.php#generator.php" >The Language Generator</a></li>
		<li id="040-dependency-injection.html" ><a href="040-dependency-injection.php" >Dependency Injection in Xtext with Google Guice</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="050-heading-runtime.php">Runtime Concepts</a></div>
		<ul style="display: none;" id="subToc_050-heading-runtime.html">
		<li id="050-heading-runtime.html#runtimeSetup.html" ><a href="050-heading-runtime.php#runtimeSetup.php" >Runtime Setup (ISetup)</a></li>
		<li id="050-heading-runtime.html#equinoxSetup.html" ><a href="050-heading-runtime.php#equinoxSetup.php" >Setup within Eclipse-Equinox (OSGi)</a></li>
		<li id="050-heading-runtime.html#runtime_concepts_4.html" ><a href="050-heading-runtime.php#runtime_concepts_4.php" >Logging</a></li>
		<li id="060-validation.html" ><a href="060-validation.php" >Validation</a></li>
		<li id="070-linking.html" ><a href="070-linking.php" >Linking</a></li>
		<li id="080-scoping.html" ><a href="080-scoping.php" >Scoping</a></li>
		<li id="090-valueconverter.html" ><a href="090-valueconverter.php" >Value Converter</a></li>
		<li id="100-serialization.html" ><a href="100-serialization.php" >Serialization</a></li>
		<li id="105-formatting.html" ><a href="105-formatting.php" >Formatting (Pretty Printing)</a></li>
		<li id="110-fragmentprovider.html" ><a href="110-fragmentprovider.php" >Fragment Provider (Referencing Xtext Models From Other EMF Artifacts)</a></li>
		<li id="115-encoding.html" ><a href="115-encoding.php" >Encoding in Xtext</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="120-heading-UI.php">IDE Concepts</a></div>
		<ul style="display: none;" id="subToc_120-heading-UI.html">
		<li id="140-labelprovider.html" ><a href="140-labelprovider.php" >Label Provider</a></li>
		<li id="150-contentassist.html" ><a href="150-contentassist.php" >Content Assist</a></li>
		<li id="155-quickfix.html" ><a href="155-quickfix.php" >Quick Fixes</a></li>
		<li id="160-templates.html" ><a href="160-templates.php" >Template Proposals</a></li>
		<li id="170-outline.html" ><a href="170-outline.php" >Outline View</a></li>
		<li id="180-hyperlinking.html" ><a href="180-hyperlinking.php" >Hyperlinking</a></li>
		<li id="195-highlighting.html" ><a href="195-highlighting.php" >Syntax Coloring</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="199-xtext-and-java.php">Xtext and Java</a></div>
		<ul style="display: none;" id="subToc_199-xtext-and-java.html">
		<li id="199-xtext-and-java.html#Xbase_3.html" ><a href="199-xtext-and-java.php#Xbase_3.php" >Plug-in Setup</a></li>
		<li id="199a-jvmtypes.html" ><a href="199a-jvmtypes.php" >Referring to Java Elements using JVM Types</a></li>
		<li id="199b-xbase-java-references.html" ><a href="199b-xbase-java-references.php" >Referring to Java Types Using Xbase</a></li>
		<li id="199c-xbase-inferred-type.html" ><a href="199c-xbase-inferred-type.php" >Inferring a JVM Model</a></li>
		<li id="199d-xbase-expressions.html" ><a href="199d-xbase-expressions.php" >Using Xbase Expressions</a></li>
		<li id="199e-xbase-language-reference.html" ><a href="199e-xbase-language-reference.php" >Xbase Language Reference</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="118-mwe-in-depth.php">MWE2</a></div>
		<ul style="display: none;" id="subToc_118-mwe-in-depth.html">
		<li id="118-mwe-in-depth.html#MWE2Exampe.html" ><a href="118-mwe-in-depth.php#MWE2Exampe.php" >Examples</a></li>
		<li id="118-mwe-in-depth.html#MWE2LanguageReference.html" ><a href="118-mwe-in-depth.php#MWE2LanguageReference.php" >Language Reference</a></li>
		<li id="118-mwe-in-depth.html#MWE2SyntaxReference.html" ><a href="118-mwe-in-depth.php#MWE2SyntaxReference.php" >Syntax Reference</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="210-emf-integration.php">Integration with EMF and Other EMF Editors</a></div>
		<ul style="display: none;" id="subToc_210-emf-integration.html">
		<li id="210-emf-integration.html#model_metamodel.html" ><a href="210-emf-integration.php#model_metamodel.php" >Model, Ecore Model, and Ecore</a></li>
		<li id="210-emf-integration.html#emf_codegen.html" ><a href="210-emf-integration.php#emf_codegen.php" >EMF Code Generation</a></li>
		<li id="210-emf-integration.html#xtext_resource.html" ><a href="210-emf-integration.php#xtext_resource.php" >XtextResource Implementation</a></li>
		<li id="210-emf-integration.html#gmf_integration.html" ><a href="210-emf-integration.php#gmf_integration.php" >Integration with GMF Editors</a></li>
		</ul>
		</li>
		<li class="partentry" >
		Appendix
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="213-migrating-from-1.0.php">Migrating from Xtext 1.0.x to 2.0</a></div>
		<ul style="display: none;" id="subToc_213-migrating-from-1.0.html">
		<li id="213-migrating-from-1.0.html#migrating_from_1_0_x_4.html" ><a href="213-migrating-from-1.0.php#migrating_from_1_0_x_4.php" >Take the Shortcut</a></li>
		<li id="213-migrating-from-1.0.html#migrating_from_1_0_x_5.html" ><a href="213-migrating-from-1.0.php#migrating_from_1_0_x_5.php" >Migrating Step By Step</a></li>
		<li id="213-migrating-from-1.0.html#migrating_from_1_0_x_6.html" ><a href="213-migrating-from-1.0.php#migrating_from_1_0_x_6.php" >Now go for then new features</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="215-migrating-from-0.7.php">Migrating from Xtext 0.7.x to 1.0</a></div>
		<ul style="display: none;" id="subToc_215-migrating-from-0.7.html">
		<li id="215-migrating-from-0.7.html#migrating_from_0_7_2.html" ><a href="215-migrating-from-0.7.php#migrating_from_0_7_2.php" >Migrating Step By Step</a></li>
		</ul>
		</li>
		</ul>
	</div>
	<div id="midcolumn">
		<a name="emf_integration" ></a>
		<h1>Integration with EMF and Other EMF Editors</h1>
				<div class="toc">
				  <ul>
				    <li><a href="210-emf-integration.php#model_metamodel.php" >Model, Ecore Model, and Ecore</a></li>
				    <li><a href="210-emf-integration.php#emf_codegen.php" >EMF Code Generation</a></li>
				    <li><a href="210-emf-integration.php#xtext_resource.php" >XtextResource Implementation</a></li>
				    <li><a href="210-emf-integration.php#gmf_integration.php" >Integration with GMF Editors</a></li>
				  </ul>
				</div>
				
		<p>
		Xtext relies heavily on EMF internally, but it can also be used as the serialization back-end of 
		other EMF-based tools. In this section we introduce the basic concepts of the 
		<a href="http://www.eclipse.org/modeling/emf/" >Eclipse Modeling Framework (EMF)</a> in the context of Xtext.  
		If you want to learn more about EMF, we recommend reading the <a href="http://www.eclipse.org/modeling/emf/" >EMF book</a>.
		</p>
		<a name="model_metamodel" ></a>
		<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
			padding: 5px 0;
			padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
			<br style="clear:both"></br>
			<h1>Model, Ecore Model, and Ecore</h1>
			<p>
			Xtext uses EMF models as the in-memory representation of any parsed text files. This in-memory 
			object graph is called the <em>Abstract Syntax Tree</em> (AST). Depending on the community this concepts is 
			also called <em>document object graph (DOM)</em>, <em>semantic model</em>, or simply <em>model</em>. We use <em>model</em> and <em>AST</em> 
			interchangeably. Given the example model from the <a href="020-domainmodel-step-by-step.php" title="Go to &quot;15 Minutes Tutorial&quot;">tutorial</a>, the AST 
			looks similar to this
			</p>
			<p>
			<div class="image" >
			<a class="gallery" rel="prettyPhoto[all]" title="Sample AST" href="images/ast.png">
				<img src="images/ast.png" 
					width="600px"
					style="width:50%" 
				/>
			</a>
			<div class="caption">
				Sample AST
			</div>
			</div>
			</p>
			<p>
			The <em>AST</em> should contain the essence of your textual models. It abstracts over syntactical information. 
			It is used by later processing steps, such as validation, compilation or interpretation. In EMF a model 
			is made up of instances of <em>EObjects</em> which are connected and an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html" title="org.eclipse.emf.ecore.EObject">EObject</abbr></a> is an instance of an <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EClass.html" title="org.eclipse.emf.ecore.EClass">EClass</abbr></a>. 
			A set of <em>EClasses</em> if contained in a so called <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a>, which are both concepts of <em>Ecore</em> 
			In Xtext, meta models are either inferred from the grammar or predefined by the user 
			(see the section on <a href="020-grammar-language.php#package_declarations.php" title="Go to &quot;EPackage Declarations&quot;">package declarations</a> for details). The next diagram shows 
			the meta model of our example:
			</p>
			<p>
			<div class="image" >
			<a class="gallery" rel="prettyPhoto[all]" title="Sample meta model" href="images/metamodel.png">
				<img src="images/metamodel.png" 
					width="600px"
				/>
			</a>
			<div class="caption">
				Sample meta model
			</div>
			</div>
			</p>
			<p>
			The language in which the meta model is defined is called <em>Ecore</em>. In other words, the meta model is 
			the Ecore model of your language. Ecore an essential part of EMF. Your models instantiate the meta model, 
			and your meta model instantiates Ecore. To put an end to this recursion, Ecore is defined in itself 
			(an instance of itself). 
			</p>
			<p>
			The meta model defines the types of the semantic nodes as Ecore <em>EClasses</em>. EClasses are shown as boxes 
			in the meta mode diagram, so in our example, <em>Model</em>, <em>Type</em>, <em>SimpleType</em>, <em>Entity</em>, and <em>Property</em> 
			are EClasses. An EClass can inherit from other EClasses. Multiple inheritance is allowed in Ecore, but of 
			course cycles are forbidden.  
			</p>
			<p>
			EClasses can have <em>EAttributes</em> for their simple properties. These are shown inside the EClasses nodes. 
			The example contains two EAttributes <em>name</em> and one EAttribute <em>isMulti</em>. The domain of values for an 
			EAttribute is defined by its <em>EDataType</em>. Ecore ships with some predefined <em>EDataTypes</em>, which essentially 
			refer to Java primitive types and other immutable classes like <a class="jdoc" href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html" title="java.lang.String">String</abbr></a>. To make a 
			distinction from the Java types, the <em>EDataTypes</em> are prefixed with an <em>E</em>. In our example, that is 
			<em>EString</em> and <em>EBoolean</em>.  
			</p>
			<p>
			In contrast to EAttributes, <em>EReferences</em> point to other EClasses. The <em>containment</em> flag indicates whether 
			an EReference is a <em>containment reference</em> or a <em>cross-reference</em>. In the diagram, references are edges 
			and containment references are marked with a diamond. At the model level, each element can have at most one 
			container, i.e. another element referring to it with a containment reference. This infers a tree structure 
			to the models, as can be seen in the sample model diagram. On the other hand, <em>cross-references</em> refer to 
			elements that can be contained anywhere else. In the example, <em>elements</em> and <em>properties</em> are containment 
			references, while <em>type</em> and <em>extends</em> are cross-references. For reasons of readability, we skipped the 
			cross-references in the sample model diagram. Note that in contrast to other parser generators, Xtext creates 
			ASTs with linked cross-references. 
			</p>
			<p>
			Other than associations in UML, EReferences in Ecore are always owned by one EClass and only navigable in the 
			direction form the owner to the type. Bi-directional associations must be modeled as two references, being 
			<em>eOpposite</em> of each other and owned by either end of the associations.
			</p>
			<p>
			The superclass of EAttributes and EReferences is <em>EStructuralFeature</em> and allows to define a name and a 
			cardinality by setting <em>lowerBound</em> and <em>upperBound</em>. Setting the latter to -1 means 'unbounded'. 
			</p>
			<p>
			The common supertype of EDataType and EClass is <em>EClassifier</em>. An <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.html" title="org.eclipse.emf.ecore.EPackage">EPackage</abbr></a> acts as a namespace and 
			container of EClassifiers. 
			</p>
			<p>
			We have summarized these most relevant concepts of Ecore in the following diagram:  
			</p>
			<p>
			<div class="image" >
			<a class="gallery" rel="prettyPhoto[all]" title="Ecore concepts" href="images/ecore.png">
				<img src="images/ecore.png" 
					width="600px"
				/>
			</a>
			<div class="caption">
				Ecore concepts
			</div>
			</div>
			</p>
		<a name="emf_codegen" ></a>
		<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
			padding: 5px 0;
			padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
			<br style="clear:both"></br>
			<h1>EMF Code Generation</h1>
			<p>
			EMF also ships with a code generator that generates Java classes from your Ecore model. The code 
			generators input is the so called <em>EMF generator model</em>. It decorates (references) the Ecore model 
			and adds additional information for the Ecore -&gt; Java transformation. Xtext will automatically generate
			a generator model with reasonable defaults for all generated metamodels, and run the EMF code generator 
			on them. 
			</p>
			<p>
			The generated classes are based on the EMF runtime library, which offers a lot of infrastructure and 
			tools to work with your models, such as persistence, reflection, referential integrity, lazy loading etc.
			</p>
			<p>
			Among other things, the code generator will generate
			<ul>
			  <li>A Java interface and a Java class for each EClassifier in your Ecore model. By default, 
			  		all classes will implement the interface <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html" title="org.eclipse.emf.ecore.EObject">EObject</abbr></a>, linking a lot
			  		of runtime functionality. </li>
			  <li>A Java bean property for each EStructuralFeature (member variable, accessor methods)</li>
			  <li>A package interface and class, holding singleton objects for all elements of your Ecore 
			  		model, allowing reflection. EPackages are also registered to the 
			  		<a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EPackage.Registry.html" title="org.eclipse.emf.ecore.EPackage.Registry">EPackage.Registry</abbr></a> to be usable at runtime.</li>
			  <li>A factory interface and class for creating instances</li>
			  <li>An abstract switch class implementing a visitor pattern to avoid if-instanceof-cascades
			  		in your code.</li>
			</ul>
			</p>
		<a name="xtext_resource" ></a>
		<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
			padding: 5px 0;
			padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
			<br style="clear:both"></br>
			<h1>XtextResource Implementation</h1>
			<p>
			Xtext provides an implementation of EMF's resource, the <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/XtextResource.html" title="org.eclipse.xtext.resource.XtextResource">XtextResource</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/XtextResource.java" title="View Source Code" >(src)</a>. 
			This does not only encapsulate the parser that converts text to an EMF model but also the 
			<a href="100-serialization.php" title="Go to &quot;Serialization&quot;">serializer</a> working the opposite direction. That way, an Xtext model just looks like any 
			other Ecore-based model from the outside, making it amenable for the use by other EMF based tools. In fact,
			the Xpand templates in the generator plug-in created by the Xtext wizard do not make any assumption on the 
			fact that the model is described in Xtext, and they would work fine with any model based on the same Ecore 
			model of the language. So in the ideal case, you can switch the serialization format of your models to your 
			self-defined DSL by just replacing the resource implementation used by your other modeling tools. 
			</p>
			<p>
			<div class="image" >
			<a class="gallery" rel="prettyPhoto[all]" title=" " href="images/emf-integration.png">
				<img src="images/emf-integration.png" 
					width="600px"
				/>
			</a>
			<div class="caption">
			</div>
			</div>
			</p>
			<p>
			The generator fragment <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/generator/resourceFactory/ResourceFactoryFragment.html" title="org.eclipse.xtext.generator.resourceFactory.ResourceFactoryFragment">ResourceFactoryFragment</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext.generator/src/org/eclipse/xtext/generator/resourceFactory/ResourceFactoryFragment.java" title="View Source Code" >(src)</a> 
			registers a factory for the <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/XtextResource.html" title="org.eclipse.xtext.resource.XtextResource">XtextResource</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/XtextResource.java" title="View Source Code" >(src)</a> to EMF's resource factory 
			registry, such that all tools using the default mechanism to resolve a resource implementation will 
			automatically get that resource implementation.   
			</p>
			<p>
			Using a self-defined textual syntax as the primary storage format has a number of advantages over the 
			default XMI serialization, e.g.
			<ul>
			  <li>You can use well-known and easy-to-use tools and techniques for manipulation, such as text
			  		editors, regular expressions, or stream editors.</li>
			  <li>You can use the same tools for version control as you use for source code. Comparing and 
			  		merging is performed in a syntax the developer is familiar with.</li>
			  <li>It is impossible to break the model such that it cannot be reopened in the editor again.</li>
			  <li>Models can be fixed using the same tools, even if they have become incompatible with a 
			  		new version of the Ecore model.</li>
			</ul>
			</p>
			<p>
			Xtext targets easy to use and naturally feeling languages. It focuses on the lexical aspects of a language
			a bit more than on the semantic ones. As a consequence, a referenced Ecore model can contain more concepts 
			than are actually covered by the Xtext grammar. As a result, not everything that is possibly expressed in 
			the EMF model can be serialized back into a textual representation with regards to the grammar. So if you 
			want to use Xtext to serialize your models as described above, it is good to have a couple of things in mind:
			</p>
			<p>
			<ul>
			  <li>Prefer optional rule calls (cardinality <em>?</em> or <em>*</em>) to mandatory ones 
			  		(cardinality <em>+</em> or default), such that missing references will not obstruct 
			  		serialization.</li>
			  <li>You should not use an Xtext-Editor on the same model instance as a self-synchronizing 
			  		other editor, e.g. a canonical GMF editor (see <a href="210-emf-integration.php#gmf_integration_stage_1.php" title="Go to &quot;Stage 1: Make GMF Read and Write the Semantic Model As Text&quot;" >section gmf_integration_stage_1</a> for details). 
			  		The Xtext parser replaces re-parsed subtrees of the AST rather than modifying it, so 
			  		elements will become stale. As the Xtext editor continuously re-parses the model on changes, 
			  		this will happen rather often. It is safer to synchronize editors more loosely, e.g. on 
			  		file changes.</li>
			  <li>Implement an <a href="110-fragmentprovider.php" title="Go to &quot;Fragment Provider (Referencing Xtext Models From Other EMF Artifacts)&quot;"><a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/IFragmentProvider.html" title="org.eclipse.xtext.resource.IFragmentProvider">IFragmentProvider</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/IFragmentProvider.java" title="View Source Code" >(src)</a></a> to make 
			  		the XtextResource return stable fragments for its contained
			  		elements, e.g. based on composite names rather than order of 
			  		appearance.</li>
			  <li>Implement an <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/naming/IQualifiedNameProvider.html" title="org.eclipse.xtext.naming.IQualifiedNameProvider">IQualifiedNameProvider</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/naming/IQualifiedNameProvider.java" title="View Source Code" >(src)</a> and an 
			  		<a href="080-scoping.php" title="Go to &quot;Scoping&quot;"><a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/scoping/IScopeProvider.html" title="org.eclipse.xtext.scoping.IScopeProvider">IScopeProvider</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/scoping/IScopeProvider.java" title="View Source Code" >(src)</a></a> to make the 
			  		names of all linkable elements in cross-references unique.</li>
			  <li>Provide an <a href="105-formatting.php" title="Go to &quot;Formatting (Pretty Printing)&quot;"><a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/formatting/IFormatter.html" title="org.eclipse.xtext.formatting.IFormatter">IFormatter</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/formatting/IFormatter.java" title="View Source Code" >(src)</a></a> to improve the readability 
			  		of the generated textual models.</li>
			  <li>Register an <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/parser/antlr/IReferableElementsUnloader.html" title="org.eclipse.xtext.parser.antlr.IReferableElementsUnloader">IReferableElementsUnloader</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/parser/antlr/IReferableElementsUnloader.java" title="View Source Code" >(src)</a> to turn 
			  		deleted/replaced model elements into EMF proxies. Design the rest 
			  		of your application such that it does never keep references to 
			  		<a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/EObject.html" title="org.eclipse.emf.ecore.EObject">EObjects</abbr></a> or to cope with proxies. That will improve the 
			  		stability of your application drastically.</li>
			  <li>Xtext will register an EMF <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/resource/Resource.Factory.html" title="org.eclipse.emf.ecore.resource.Resource.Factory">Resource.Factory</abbr></a>, so resources with 
			  		the file extension you entered when generating the Xtext plug-ins 
			  		will be automatically loaded in an <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/XtextResource.html" title="org.eclipse.xtext.resource.XtextResource">XtextResource</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/XtextResource.java" title="View Source Code" >(src)</a> when you use 
			  		EMF's <a class="jdoc" href="http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/org/eclipse/emf/ecore/resource/ResourceSet.html" title="org.eclipse.emf.ecore.resource.ResourceSet">ResourceSet</abbr></a> API to load it.</li>
			</ul>
			</p>
		<a name="gmf_integration" ></a>
		<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
			padding: 5px 0;
			padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
			<br style="clear:both"></br>
			<h1>Integration with GMF Editors</h1>
			<div class="toc">
			  <ul>
			    <li><a href="210-emf-integration.php#gmf_integration_stage_1.php" >Stage 1: Make GMF Read and Write the Semantic Model As Text</a></li>
			  </ul>
			</div>
			<p>
			We do no longer maintain the GMF example code and have removed it from our installation. You can still 
			access the last version of the source code form our  
			<a href="http://git.eclipse.org/c/tmf/org.eclipse.xtext.git/tree/examples/org.eclipse.xtext.xtext.ui.examples/contents" >source
			code repository</a>.
			</p>
			<p>
			The <a href="http://www.eclipse.org/modeling/gmp/?project=gmf" >Graphical Modeling Framework (GMF)</a> allows 
			to create graphical diagram editors for Ecore models. To illustrate how to build a GMF on top of an
			<a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/XtextResource.html" title="org.eclipse.xtext.resource.XtextResource">XtextResource</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/XtextResource.java" title="View Source Code" >(src)</a> we have provided an example. You must have the Helios version 2.3 of GMF Notation, 
			Runtime and Tooling and their dependencies installed in your workbench to run the example. With other 
			versions of GMF it might work to regenerate the diagram code. 
			</p>
			<p>
			The example consists of a number of plug-ins
			</p>
			<p>
			<table>
			  <tr>
			    <td>Plug-in</td>
			    <td>Framework</td>
			    <td>Purpose</td>
			    <td>Contents</td>
			  </tr>
			  <tr>
			    <td>o.e.x.example.gmf</td>
			    <td>Xtext</td>
			    <td>Xtext runtime plug-in</td>
			    <td>Grammar, derived metamodel and language 
			    	infrastructure</td>
			  </tr>
			  <tr>
			    <td>o.e.x.e.g.ui</td>
			    <td>Xtext</td>
			    <td>Xtext UI plug-in</td>
			    <td>Xtext editor and services</td>
			  </tr>
			  <tr>
			    <td>o.e.x.e.g.edit</td>
			    <td>EMF</td>
			    <td>EMF.edit plug-in</td>
			    <td>UI services generated from the metamodel</td>
			  </tr>
			  <tr>
			    <td>o.e.x.e.g.models</td>
			    <td>GMF</td>
			    <td>GMF design models</td>
			    <td>Input for the GMF code generator</td>
			  </tr>
			  <tr>
			    <td>o.e.x.e.g.diagram</td>
			    <td>GMF</td>
			    <td>GMF diagram editor</td>
			    <td>Purely generated from the GMF design models</td>
			  </tr>
			  <tr>
			    <td>o.e.x.e.g.d.extensions</td>
			    <td>GMF and Xtext</td>
			    <td>GMF diagram editor extensions</td>
			    <td>Manual extensions 
			    	to the generated GMF editor for integration with Xtext</td>
			  </tr>
			  <tr>
			    <td>o.e.x.gmf.glue</td>
			    <td>Xtext and GMF</td>
			    <td>Glue code</td>
			    <td>Generic code to integrate Xtext and GMF</td>
			  </tr>
			</table>
			</p>
			<p>
			We will elaborate the example in three stages.
			</p>
			<a name="gmf_integration_stage_1" ></a>
			<h2>Stage 1: Make GMF Read and Write the Semantic Model As Text</h2>
			<p>
			A diagram editor in GMF by default manages two resources: One for the semantic model, that is the 
			model we're actually interested in for further processing. In our example it is a model representing 
			entities and data types. The second resource holds the notation model. It represents the shapes you 
			see in the diagram and their graphical properties. Notation elements reference their semantic 
			counterparts. An entity's name would be in the semantic model, while the font to draw it in the 
			diagram would be stored the notation model. Note that in the integration example we're only trying 
			to represent the semantic resource as text.
			</p>
			<p>
			To keep the semantic model and the diagram model in sync, GMF uses a so called <em>CanonicalEditPolicy</em>. 
			This component registers as a listener to the semantic model and automatically updates diagram 
			elements when their semantic counterparts change, are added or are removed. Some notational information 
			can be derived from the semantic model by some default mapping, but usually there is a lot of graphical 
			stuff that the user wants to change to make the diagram look better.   
			</p>
			<p>
			In an Xtext editor, changes in the text are transfered to the underlying 
			<a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/XtextResource.html" title="org.eclipse.xtext.resource.XtextResource">XtextResource</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/XtextResource.java" title="View Source Code" >(src)</a> by a call to the method 
			<a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/XtextResource.html" title="org.eclipse.xtext.resource.XtextResource">XtextResource.update(int, int, String)</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/XtextResource.java" title="View Source Code" >(src)</a>, which will trigger a
			partial parsing of the dirty text region and a replacement of the corresponding subtree in the AST model 
			(semantic model). 
			</p>
			<p>
			Having an Xtext editor and a canonical GMF editor on the same resource can therefore lead to loss of 
			notational information, as a change in the Xtext editor will remove a subtree in the AST, causing the 
			<em>CanonicalEditPolicy</em> to remove all notational elements, even though it was customized by the user. 
			The Xtext rebuilds the AST and the notation model is restored using the default mapping. It is therefore 
			not recommended to let an Xtext editor and a canonical GMF editor work on the same resource.    
			</p>
			<p>
			In this example, we let each editor use its own memory instance of the model and synchronize on file 
			changes only. Both frameworks already synchronize with external changes to the edited files 
			out-of-the-box. In the glue code, a <em>org.eclipse.xtext.gmf.glue.concurrency.ConcurrentModificationObserver</em>
			warns the user if she tries to edit the same file with two different model editors concurrently.
			</p>
			<p>
			In the example, we started with writing an Xtext grammar for an entity language. As explained above, we 
			preferred optional assignments and rather covered mandatory attributes in a validator. Into the bargain, 
			we added some services to improve the EMF integration, namely a formatter, a fragment provider and an 
			unloader. Then we let Xtext generate the language infrastructure. From the derived Ecore model and its 
			generator model, we generated the edit plug-in (needed by GMF) and added some fancier icons. 
			</p>
			<p>
			From the GMF side, we followed the default procedure and created a gmfgraph model, a gmftool model and 
			a gmfmap model referring to the Ecore model derived form the Xtext grammar. We changed some settings in 
			the gmfgen model derived by GMF from the gmfmap model, namely to enable printing and to enable validation 
			and validation decorators. Then we generated the diagram editor.     
			</p>
			<p>
			Voil&agrave;, we now have a diagram editor that reads/writes its semantic model as text. Also note that the 
			validator from Xtext is already integrated in the diagram editor via the menu bar. 
			</p>
			<a name="gmf_integration_stage_1_9" ></a>
			<h3>Stage 2: Calling the Xtext Parser to Parse GMF Labels</h3>
			<p>
			GMF's generated parser for the labels is a bit poor: It will work on attributes only, and will fail for 
			cross-references, e.g. an attribute's type. So why not use the Xtext parser to process the user's input? 
			</p>
			<p>
			An <a class="jdoc" href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.3/org/eclipse/xtext/resource/XtextResource.html" title="org.eclipse.xtext.resource.XtextResource">XtextResource</abbr></a> <a class="srcLink" href="https://github.com/eclipse/xtext/blob/v2.2.0/plugins/org.eclipse.xtext/src/org/eclipse/xtext/resource/XtextResource.java" title="View Source Code" >(src)</a> keeps track of it's concrete syntax representation by 
			means of a so called node model (see <a href="020-grammar-language.php#parser_rules.php" title="Go to &quot;Parser Rules&quot;" >section parser_rules</a> for a more detailed description). The node model 
			represents the parse tree and provides information on the offset, length and text that has been parsed to 
			create a semantic model element. The nodes are attached to their semantic elements by means of a node adapter.    
			</p>
			<p>
			We can use the node adapter to access the text block that represents an attribute, and call the Xtext 
			parser to parse the user input. The example code is contained in
			<em>org.eclipse.xtext.gmf.glue.edit.part.AntlrParserWrapper</em>. <em>SimplePropertyWrapperEditPartOverride</em> shows 
			how this is integrated into the generated GMF editor. Use the <em>EntitiesEditPartFactoryOverride</em> to instantiate 
			it and the <em>EntitiesEditPartProviderOverride</em> to create the overridden factory, and register the latter to 
			the extension point. Note that this is a non-invasive way to extend generated GMF editors.
			</p>
			<p>
			When you test the editor, you will note that the node model will be corrupt after editing a few labels. This 
			is because the node model is only updated by the Xtext parser and not by the serializer. So we need a way 
			to automatically call the (partial) parser every time the semantic model is changed. You will find the required 
			classes in the package <em>org.eclipse.xtext.gmf.glue.editingdomain</em>. To activate node model reconciling, you 
			have to add a line 
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						XtextNodeModelReconciler.adapt(editingDomain);
					</p>
				</div>
			</div>
			</p>
			<p>
			in the method <span class="inlinecode">createEditingDomain()</span> of the generated <em>EntitiesDocumentProvider</em>. To avoid changing the 
			generated code, you can modify the code generation template for that class by setting
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Dynamic&nbsp;Templates&nbsp;-&gt;&nbsp;<span class="keyword">true</span><br/>
						&nbsp;&nbsp;&nbsp;&nbsp;Template&nbsp;Directory&nbsp;=&nbsp;<span class="string">"org.eclipse.xtext.example.gmf.models/templates"</span>
					</p>
				</div>
			</div>
			</p>
			<p>
			in the <em>GenEditorGenerator</em> and 
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Required&nbsp;Plugins&nbsp;-&gt;&nbsp;<span class="string">"org.eclipse.xtext.gmf.glue"</span>
					</p>
				</div>
			</div>
			</p>
			<p>
			in the <em>GenPlugin</em> element of the gmfgen before generating the diagram editor anew.
			</p>
			<a name="gmf_integration_stage_1_10" ></a>
			<h3>Stage 3: A Popup Xtext Editor (experimental)</h3>
			<p>
			<em>SimplePropertyPopupXtextEditorEditPartOverride</em> demonstrates how to spawn an Xtext editor to edit a model 
			element. The editor pops up in its control and shows only the section of the selected element. It is a fully 
			fledged Xtext editor, with support of validation, code assist and syntax highlighting. The edited text is only
			transfered back to the model if it does not have any errors.   
			</p>
			<p>
			Note that there still are synchronization issues, that's why we keep this one marked as experimental.
			</p>
		<div id="disqus_thread"></div>
		<script type="text/javascript" src="documentationRoot.js"></script>
		<script type="text/javascript">
		    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		    var disqus_shortname = 'xtext'; // required: replace example with your forum shortname
		
		    // The following are highly recommended additional parameters. Remove the slashes in front to use.
		    var disqus_identifier = 'emf_integration';
		    var disqus_url = documentationRoot+'210-emf-integration.php';
		
		    /* * * DON'T EDIT BELOW THIS LINE * * */
		    (function() {
		        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		    })();
		</script>
 		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	</div>
	<br style="clear:both;height:1em;">
