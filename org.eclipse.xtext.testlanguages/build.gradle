apply from: "${rootDir}/gradle/mwe2-workflows.gradle"

dependencies {
	api project(':org.eclipse.xtext')
	api project(':org.eclipse.xtext.testing')
	api 'org.eclipse.platform:org.eclipse.equinox.common'
	api 'org.eclipse.platform:org.eclipse.core.runtime'
	api 'org.eclipse.emf:org.eclipse.emf.mwe2.runtime'
}

// Include the mwe2 and xtext files from the main source set when executing the workflow
sourceSets.mwe2.runtimeClasspath += processResources.outputs.files

task generateTestLanguages(type: XtextGeneratorTask) {
	workflow = file('src/org/eclipse/xtext/testlanguages/GenerateTestLanguages.mwe2')
	outputs.dir 'src-gen'
}

compileJava.mustRunAfter generateTestLanguages